<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="zerolhao-blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="zerolhao-blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zerolhao-blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>zerolhao-blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zerolhao-blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/H34-AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/H34-AJAX/" itemprop="url">H34-AJAX</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-07T11:16:05+08:00">
                2018-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何发请求？"><a href="#如何发请求？" class="headerlink" title="如何发请求？"></a>如何发请求？</h1><p>用 form 可以发请求，但是会刷新页面或新开页面<br>用 a 可以发 get 请求，但是也会刷新页面或新开页面<br>用 img 可以发 get 请求，但是只能以图片的形式展示<br>用 link 可以发 get 请求，但是只能以 CSS、favicon 的形式展示<br>用 script 可以发 get 请求，但是只能以脚本的形式运行</p>
<p>有没有什么方式可以实现</p>
<ol>
<li>get、post、put、delete 请求都行</li>
<li>想以什么形式展示就以什么形式展示</li>
</ol>
<h1 id="微软的突破"><a href="#微软的突破" class="headerlink" title="微软的突破"></a>微软的突破</h1><p>IE 5 率先在 JS 中引入 ActiveX 对象（API），使得 JS 可以直接发起 HTTP 请求。<br>随后 Mozilla、 Safari、 Opera 也跟进（抄袭）了，取名 XMLHttpRequest，并被纳入 W3C 规范</p>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a><a href="http://javascript.ruanyifeng.com/bom/ajax.html" target="_blank" rel="noopener">AJAX</a></h1><p>Jesse James Garrett 讲如下技术取名叫做 AJAX：异步的 JavaScript 和 XML<br>Asynchronous JavaScript and XML</p>
<ol>
<li>使用 XMLHttpRequest 发请求</li>
<li>服务器返回 XML 格式的字符串</li>
<li>JS 解析 XML，并更新局部页面<br>（但我们现在不同XML改用更好用的JSON了）</li>
</ol>
<h1 id="XMLHttpRequest实例的属性"><a href="#XMLHttpRequest实例的属性" class="headerlink" title="XMLHttpRequest实例的属性"></a>XMLHttpRequest实例的属性</h1><ul>
<li><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc2" target="_blank" rel="noopener">readyState</a><br>readyState是一个只读属性，用一个整数和对应的常量，表示XMLHttpRequest请求当前所处的状态。</li>
</ul>
<blockquote>
<p>0，对应常量UNSENT，表示XMLHttpRequest实例已经生成，但是open()方法还没有被调用。<br>1，对应常量OPENED，表示send()方法还没有被调用，仍然可以使用setRequestHeader()，设定HTTP请求的头信息。<br>2，对应常量HEADERS_RECEIVED，表示send()方法已经执行，并且头信息和状态码已经收到。<br>3，对应常量LOADING，表示正在接收服务器传来的body部分的数据，如果responseType属性是text或者空字符串，responseText就会包含已经收到的部分信息。<br>4，对应常量DONE，表示服务器数据已经完全接收，或者本次接收已经失败了。</p>
</blockquote>
<ul>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc22" target="_blank" rel="noopener">readyStateChange</a><br><code>readyState</code>属性的值发生改变，就会触发readyStateChange事件。<br>我们可以通过onReadyStateChange属性，指定这个事件的回调函数，对不同状态进行不同处理。尤其是当状态变为4的时候，表示通信成功，这时回调函数就可以处理服务器传送回来的数据。</p>
</li>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc3" target="_blank" rel="noopener">onreadystatechange</a><br>onreadystatechange属性指向一个回调函数，当readystatechange事件发生的时候，这个回调函数就会调用，并且XMLHttpRequest实例的readyState属性也会发生变化。<br>另外，如果使用abort()方法，终止XMLHttpRequest请求，onreadystatechange回调函数也会被调用。</p>
</li>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc4" target="_blank" rel="noopener">response</a><br>response属性为只读，返回接收到的数据体（即body部分）。<br>它的类型可以是ArrayBuffer、Blob、Document、JSON对象、或者一个字符串，这由XMLHttpRequest.responseType属性的值决定。<br>如果本次请求没有成功或者数据不完整，该属性就会等于null。</p>
</li>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc5" target="_blank" rel="noopener">responseType</a><br>responseType属性用来指定服务器返回数据（xhr.response）的类型。</p>
</li>
</ul>
<blockquote>
<p>”“：字符串（默认值）<br>“arraybuffer”：ArrayBuffer对象<br>“blob”：Blob对象<br>“document”：Document对象<br>“json”：JSON对象<br>“text”：字符串</p>
</blockquote>
<p>text类型适合大多数情况，而且直接处理文本也比较方便，document类型适合返回XML文档的情况，blob类型适合读取二进制数据，比如图片文件。<br>如果将这个属性设为“json”，支持JSON的浏览器（Firefox&gt;9，chrome&gt;30），就会自动对返回数据调用JSON.parse()方法。也就是说，你从xhr.response属性（注意，不是xhr.responseText属性）得到的不是文本，而是一个JSON对象。</p>
<p>XHR2支持Ajax的返回类型为文档，即xhr.responseType=”document” 。这意味着，对于那些打开CORS的网站，我们可以直接用Ajax抓取网页，然后不用解析HTML字符串，直接对XHR回应进行DOM操作。</p>
<ul>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc6" target="_blank" rel="noopener">responseText</a><br>responseText属性返回从服务器接收到的字符串，该属性为只读。如果本次请求没有成功或者数据不完整，该属性就会等于null。<br>如果服务器返回的数据格式是JSON，就可以使用responseText属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var data = ajax.responseText;</span><br><span class="line">data = JSON.parse(data);</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc8" target="_blank" rel="noopener">status</a><br>status属性为只读属性，表示本次请求所得到的HTTP状态码，它是一个整数。一般来说，如果通信成功的话，这个状态码是200。</p>
</li>
<li><p><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc9" target="_blank" rel="noopener">statusText</a><br>statusText属性为只读属性，返回一个字符串，表示服务器发送的状态提示。不同于status属性，该属性包含整个状态信息，比如”200 OK“。</p>
</li>
</ul>
<p>-<a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc17" target="_blank" rel="noopener">open()</a><br>XMLHttpRequest对象的open方法用于指定发送HTTP请求的参数，它的使用格式如下，一共可以接受五个参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void open(</span><br><span class="line">   string method,</span><br><span class="line">   string url,</span><br><span class="line">   optional boolean async,</span><br><span class="line">   optional string user,</span><br><span class="line">   optional string password</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>method：表示HTTP动词，比如“GET”、“POST”、“PUT”和“DELETE”。<br>url: 表示请求发送的网址。<br>async: 格式为布尔值，默认为true，表示请求是否为异步。如果设为false，则send()方法只有等到收到服务器返回的结果，才会有返回值。<br>user：表示用于认证的用户名，默认为空字符串。<br>password：表示用于认证的密码，默认为空字符串。</p>
</blockquote>
<p>如果对使用过open()方法的请求，再次使用这个方法，等同于调用abort()。<br>下面发送POST请求的例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(&apos;POST&apos;, encodeURI(&apos;someURL&apos;));</span><br><span class="line">xhr.setRequestHeader(&apos;Content-Type&apos;, &apos;application/x-www-form-urlencoded&apos;);</span><br><span class="line">xhr.onload = function() &#123;&#125;;</span><br><span class="line">xhr.send(encodeURI(&apos;dataString&apos;));</span><br></pre></td></tr></table></figure></p>
<p>上面方法中，open方法向指定URL发出POST请求，send方法送出实际的数据。</p>
<p>下面是一个同步AJAX请求的例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var request = new XMLHttpRequest();</span><br><span class="line">request.open(&apos;GET&apos;, &apos;/bar/foo.txt&apos;, false);</span><br><span class="line">request.send(null);</span><br><span class="line"></span><br><span class="line">if (request.status === 200) &#123;</span><br><span class="line">  console.log(request.responseText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><a href="http://javascript.ruanyifeng.com/bom/ajax.html#toc18" target="_blank" rel="noopener">send()</a><br>send方法用于实际发出HTTP请求。如果不带参数，就表示HTTP请求只包含头信息，也就是只有一个URL，典型例子就是GET请求；如果带有参数，就表示除了头信息，还带有包含具体数据的信息体，典型例子就是POST请求。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ajax.open(&apos;GET&apos;</span><br><span class="line">  , &apos;http://www.example.com/somepage.php?id=&apos; + encodeURIComponent(id)</span><br><span class="line">  , true</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// 等同于</span><br><span class="line">var data = &apos;id=&apos; + encodeURIComponent(id));</span><br><span class="line">ajax.open(&apos;GET&apos;, &apos;http://www.example.com/somepage.php&apos;, true);</span><br><span class="line">ajax.send(data);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面代码中，GET请求的参数，可以作为查询字符串附加在URL后面，也可以作为send方法的参数。<br>下面是发送POST请求的例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var data = &apos;email=&apos;</span><br><span class="line">  + encodeURIComponent(email)</span><br><span class="line">  + &apos;&amp;password=&apos;</span><br><span class="line">  + encodeURIComponent(password);</span><br><span class="line">ajax.open(&apos;POST&apos;, &apos;http://www.example.com/somepage.php&apos;, true);</span><br><span class="line">ajax.setRequestHeader(&apos;Content-Type&apos;, &apos;application/x-www-form-urlencoded&apos;);</span><br><span class="line">ajax.send(data);</span><br></pre></td></tr></table></figure></p>
<p>如果请求是异步的（默认为异步），该方法在发出请求后会立即返回。如果请求为同步，该方法只有等到收到服务器回应后，才会返回。</p>
<p>注意，所有XMLHttpRequest的监听事件，都必须在send()方法调用之前设定。</p>
<p>send方法的参数就是发送的数据。多种格式的数据，都可以作为它的参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void send();</span><br><span class="line">void send(ArrayBufferView data);</span><br><span class="line">void send(Blob data);</span><br><span class="line">void send(Document data);</span><br><span class="line">void send(String data);</span><br><span class="line">void send(FormData data);</span><br></pre></td></tr></table></figure></p>
<h1 id="JSON-–-一门新语言"><a href="#JSON-–-一门新语言" class="headerlink" title="JSON – 一门新语言"></a>JSON – 一门新语言</h1><p><a href="http://json.org/" target="_blank" rel="noopener">http://json.org/</a><br>它和 JavaScript的区别：</p>
<ol>
<li>没有抄袭 function 和 undefined</li>
<li>JSON 的字符串首尾必须是 双引号</li>
<li>JS         VS       JSON<br>undefined           没有<br>null                null<br>[‘a’,’b’]           [“a”,”b”]<br>function fn(){}     没有<br>{name: ‘zero’}      {“name”: “zero”}<br>‘string’            “string”<br>var a = {}<br>a.self = a          搞不定（没有变量）<br>{<strong>proto</strong>}         没有原型链（只是简单的哈希）</li>
</ol>
<h1 id="如何使用-XMLHttpRequest"><a href="#如何使用-XMLHttpRequest" class="headerlink" title="如何使用 XMLHttpRequest"></a>如何使用 XMLHttpRequest</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">myButton.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">  let request = new XMLHttpRequest()</span><br><span class="line">  request.open(&apos;get&apos;, &apos;/xxx&apos;) // 配置request</span><br><span class="line">  request.send()</span><br><span class="line">  request.onreadystatechange = ()=&gt;&#123;</span><br><span class="line">    if(request.readyState === 4)&#123;</span><br><span class="line">      console.log(&apos;请求响应都完毕了&apos;)</span><br><span class="line">      console.log(request.status)</span><br><span class="line">      if(request.status &gt;= 200 &amp;&amp; request.status &lt; 300)&#123;</span><br><span class="line">        console.log(&apos;说明请求成功&apos;)</span><br><span class="line">        console.log(typeof request.responseText)</span><br><span class="line">        console.log(request.responseText)</span><br><span class="line">        let string = request.responseText</span><br><span class="line">        // 把符合 JSON 语法的字符串</span><br><span class="line">        // 转换成 JS 对应的值</span><br><span class="line">        let object = window.JSON.parse(string) </span><br><span class="line">        // JSON.parse 是浏览器提供的</span><br><span class="line">        console.log(typeof object)</span><br><span class="line">        console.log(object)</span><br><span class="line">        console.log(&apos;object.note&apos;)</span><br><span class="line">        console.log(object.note)</span><br><span class="line"></span><br><span class="line">      &#125;else if(request.status &gt;= 400)&#123;</span><br><span class="line">        console.log(&apos;说明请求失败&apos;) </span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 后台</span><br><span class="line">// 后端代码</span><br><span class="line">  &#125;else if(path===&apos;/xxx&apos;)&#123;</span><br><span class="line">    response.statusCode = 200</span><br><span class="line">    response.setHeader(&apos;Content-Type&apos;, &apos;text/json;charset=utf-8&apos;)</span><br><span class="line">    response.setHeader(&apos;Access-Control-Allow-Origin&apos;, &apos;http://frank.com:8001&apos;) // 允许http://frank.com:8001访问</span><br><span class="line">    response.write(`</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;note&quot;:&#123;</span><br><span class="line">        &quot;to&quot;: &quot;小谷&quot;,</span><br><span class="line">        &quot;from&quot;: &quot;方方&quot;,</span><br><span class="line">        &quot;heading&quot;: &quot;打招呼&quot;,</span><br><span class="line">        &quot;content&quot;: &quot;hi&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    `)</span><br><span class="line">    response.end()</span><br></pre></td></tr></table></figure>
<p><a href="">完整代码</a></p>
<h1 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a><a href="http://javascript.ruanyifeng.com/bom/same-origin.html" target="_blank" rel="noopener">同源策略</a></h1><p>只有 协议+端口+域名 一模一样才允许发 AJAX 请求</p>
<ol>
<li><a href="http://baidu.com" target="_blank" rel="noopener">http://baidu.com</a> 可以向 <a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a> 发 AJAX 请求吗 no</li>
<li><a href="http://baidu.com:80" target="_blank" rel="noopener">http://baidu.com:80</a> 可以向 <a href="http://baidu.com:81" target="_blank" rel="noopener">http://baidu.com:81</a> 发 AJAX 请求吗 no</li>
</ol>
<p>浏览器必须保证<br>只有 协议+端口+域名 一模一样才允许发 AJAX 请求<br>CORS 可以告诉浏览器，我俩一家的，别阻止他</p>
<p>突破同源策略 === 跨域</p>
<p>Cross-Origin Resource Sharing<br>跨域资源共享</p>
<h2 id="为什么-form-可以跨域而-AJAX-不行"><a href="#为什么-form-可以跨域而-AJAX-不行" class="headerlink" title="为什么 form 可以跨域而 AJAX 不行"></a>为什么 form 可以跨域而 AJAX 不行</h2><p>因为原页面用form提交到另一个域名之后，原页面的脚本无法获取新页面中的内容。<br>所以浏览器认为这是安全的。<br>而AJAX是可以读取响应内容的，因此浏览器不允许你这么做。<br>如果你F12查看的话，会发现请求已经发送出去了，只是你拿不到响应而已。<br>所以浏览器这个策略的本质是，一个域名的js，在未经允许的情况下，不得读取另一个域名的内容，但浏览器并不阻止你向另一个域名发送请求。</p>
<h1 id="CORS-跨域"><a href="#CORS-跨域" class="headerlink" title="CORS 跨域"></a><a href="http://javascript.ruanyifeng.com/bom/cors.html" target="_blank" rel="noopener">CORS 跨域</a></h1><p>上面例子的这句代码<br>服务器添加响应头<br><code>response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;http://frank.com:8001&#39;)</code><br>就是设置服务器允许 <code>http://frank.com:8001</code> 源访问（假设服务器是）<code>http://jack.com:8002</code></p>
<h1 id="调试小技巧"><a href="#调试小技巧" class="headerlink" title="调试小技巧"></a>调试小技巧</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.time()</span><br><span class="line">var i = 0;</span><br><span class="line">console.timeEnd()</span><br><span class="line">// 会将console中间的代码执行花费的时间打印出来</span><br></pre></td></tr></table></figure>
<p>参考文章：<a href="http://javascript.ruanyifeng.com/bom/ajax.html" target="_blank" rel="noopener">阮一峰</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/05/H33-JSONP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/H33-JSONP/" itemprop="url">H33-JSONP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-05T21:13:53+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据库是什么"><a href="#数据库是什么" class="headerlink" title="数据库是什么"></a>数据库是什么</h1><ol>
<li>文件系统是一种数据库</li>
<li>MySQL 是一种数据库<br>只要能长久的存数据，就是数据库</li>
</ol>
<h1 id="用数据库做加减法（更改用户账户余额）"><a href="#用数据库做加减法（更改用户账户余额）" class="headerlink" title="用数据库做加减法（更改用户账户余额）"></a>用数据库做加减法（更改用户账户余额）</h1><p><a href="https://github.com/zerolhao/node-demo/tree/master/A33-lessonCode" target="_blank" rel="noopener">https://github.com/zerolhao/node-demo/tree/master/A33-lessonCode</a></p>
<h1 id="局部刷新怎么做"><a href="#局部刷新怎么做" class="headerlink" title="局部刷新怎么做"></a>局部刷新怎么做</h1><p>不返回html，返回js</p>
<p>方案一：用图片造get请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">    let image = document.createElement(&apos;img&apos;)</span><br><span class="line">    image.src = &apos;/pay&apos;</span><br><span class="line">    image.onload = function()&#123; // 状态码是 200~299 则表示成功</span><br><span class="line">        alert(&apos;成功&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">    image.onload = function()&#123; // 状态码大于等于 400 则表示失败</span><br><span class="line">        alert(&apos;失败&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>方案二：用script造get请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">    let script = document.createElement(&apos;script&apos;)</span><br><span class="line">    script.src = &apos;/pay&apos;</span><br><span class="line">    document.body.appendChild(script) // 和图片不同，必须添加到页面内才会执行</span><br><span class="line">    script.onload = function(e)&#123; // 状态码是 200~299 则表示成功</span><br><span class="line">      // 删除script标签，如果想看见可以 debugger</span><br><span class="line">      e.currentTarget.remove()</span><br><span class="line">    &#125;</span><br><span class="line">    script.onload = function(e)&#123; // 状态码大于等于 400 则表示失败</span><br><span class="line">      alert(&apos;fail&apos;)</span><br><span class="line">      e.currentTarget.remove()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">// 后端代码</span><br><span class="line">if (path === &apos;/pay&apos;)&#123;</span><br><span class="line">    let amount = fs.readFileSync(&apos;./db&apos;, &apos;utf8&apos;)</span><br><span class="line">    amount -= 1</span><br><span class="line">    fs.writeFileSync(&apos;./db&apos;, amount)</span><br><span class="line">    response.setHeader(&apos;Content-Type&apos;, &apos;application/javascript&apos;)</span><br><span class="line">    response.write(&apos;amount.innerText = &apos; + amount) // 浏览器执行此代码以更新页面‘余额’</span><br><span class="line">    // 也可以使用es6：response.write(`amount.innerText = amount.innerText - 1`)</span><br><span class="line">    response.end()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种技术叫做 SRJ - Server Rendered JavaScript</p>
<h2 id="特点：域名无所谓"><a href="#特点：域名无所谓" class="headerlink" title="特点：域名无所谓"></a>特点：域名无所谓</h2><p>跨域 SRJ</p>
<h1 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h1><p>请求方：frank.com 的前端程序员（浏览器）<br>响应方：jack.com 的后端程序员（服务器）</p>
<ol>
<li>请求方创建 script，src 指向响应方，同时传一个查询参数 ?callbackName=yyy</li>
<li>响应方根据查询参数callbackName，构造形如<ul>
<li>yyy.call(undefined, ‘你要的数据’)</li>
<li>yyy(‘你要的数据’)<br>这样的响应</li>
</ul>
</li>
<li>浏览器接收到响应，就会执行 yyy.call(undefined, ‘你要的数据’)</li>
<li>那么请求方就知道了他要的数据<br>这就是 JSONP</li>
</ol>
<p>方案3：JSONP<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// 前端</span><br><span class="line">button.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">    let script = document.createElement(&apos;script&apos;)</span><br><span class="line">    let functionName = &apos;frank&apos;+ parseInt(Math.random()*10000000 ,10)</span><br><span class="line">    window[functionName] = function()&#123;  // 每次请求之前搞出一个随机的函数</span><br><span class="line">        amount.innerText = amount.innerText - 0 - 1</span><br><span class="line">    &#125;</span><br><span class="line">    script.src = &apos;/pay?callback=&apos; + functionName</span><br><span class="line">    document.body.appendChild(script)</span><br><span class="line">    script.onload = function(e)&#123; // 状态码是 200~299 则表示成功</span><br><span class="line">        e.currentTarget.remove()</span><br><span class="line">        delete window[functionName] // 请求完了就干掉这个随机函数</span><br><span class="line">    &#125;</span><br><span class="line">    script.onload = function(e)&#123; // 状态码大于等于 400 则表示失败</span><br><span class="line">        e.currentTarget.remove()</span><br><span class="line">        delete window[functionName] // 请求完了就干掉这个随机函数</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 后端</span><br><span class="line">if (path === &apos;/pay&apos;)&#123;</span><br><span class="line">    let amount = fs.readFileSync(&apos;./db&apos;, &apos;utf8&apos;)</span><br><span class="line">    amount -= 1</span><br><span class="line">    fs.writeFileSync(&apos;./db&apos;, amount)</span><br><span class="line">    let callbackName = query.callback</span><br><span class="line">    response.setHeader(&apos;Content-Type&apos;, &apos;application/javascript&apos;)</span><br><span class="line">    response.write(`</span><br><span class="line">        $&#123;callbackName&#125;.call(undefined, &apos;success&apos;)</span><br><span class="line">    `)</span><br><span class="line">    response.end()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h2><ol>
<li>callbackName 叫做 callback</li>
<li>yyy 一般用 随机数 frank12312312312321325() // 因为可能同时调用很多网站jsonp，不如用过就没了</li>
<li>使用 jQuery来写  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123; // 和ajax没关系</span><br><span class="line">url: &quot;http://jack.com:8002/pay&quot;, // callback和函数名jq都会帮你写好</span><br><span class="line">dataType: &quot;jsonp&quot;,</span><br><span class="line">success: function( response ) &#123;</span><br><span class="line">    if(response === &apos;success&apos;)&#123;</span><br><span class="line">    amount.innerText = amount.innerText - 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">  </span><br><span class="line">$.jsonp()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h1><p>请问 JSONP 为什么不支持 POST？<br>答：</p>
<ol>
<li>因为 JSONP 是通过动态创建 script 实现的</li>
<li>动态创建 script 的时候只能用 get 不能用 post</li>
<li>console.log(‘pathWithQuery’, ‘queryString’, ‘path’, ‘query’, ‘method’)<br>console.log(pathWithQuery, queryString, path, query, method)</li>
</ol>
<p>参考文章：<a href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html" target="_blank" rel="noopener">阮一峰</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/05/A32-DOM 事件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/A32-DOM 事件/" itemprop="url">A32-DOM 事件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-05T21:09:36+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何做「点击其他地方关闭浮层」"><a href="#如何做「点击其他地方关闭浮层」" class="headerlink" title="如何做「点击其他地方关闭浮层」"></a>如何做「点击其他地方关闭浮层」</h1><ul>
<li><p>防止冒泡<br>w3c的方法是<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopPropagation" target="_blank" rel="noopener">e.stopPropagation()</a>，IE则是使用e.cancelBubble = true</p>
</li>
<li><p>阻止默认行为<br>w3c的方法是<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Event/preventDefault" target="_blank" rel="noopener">e.preventDefault()</a>，IE则是使用e.returnValue = false;</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">//  html</span><br><span class="line">&lt;div id=&quot;wrapper&quot; class=&quot;wrapper&quot;&gt;</span><br><span class="line">  &lt;button id=&quot;clickMe&quot;&gt;点我&lt;/button&gt;</span><br><span class="line">  &lt;div id=&quot;popover&quot; class=&quot;popover&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot;&gt;浮层</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// css</span><br><span class="line">body&#123;border: 1px solid red; &#125;</span><br><span class="line">.wrapper&#123;position: relative; display: inline-block; &#125;</span><br><span class="line">.popover&#123;border: 1px solid red; position: absolute; left: 100%;</span><br><span class="line">  top: 0; white-space: nowrap; padding: 10px; margin-left: 10px;</span><br><span class="line">  background: white; display: none; &#125;</span><br><span class="line">.popover::before&#123;position: absolute; right: 100%; top: 5px;</span><br><span class="line">  border: 10px solid transparent; border-right-color: red;</span><br><span class="line">  content: &apos;&apos;; &#125;</span><br><span class="line">.popover::after&#123;position: absolute; right: 100%; top: 5px;</span><br><span class="line">  border: 10px solid transparent; border-right-color: white;</span><br><span class="line">  content: &apos;&apos;; margin-right: -1px; &#125;</span><br><span class="line">//  js  </span><br><span class="line">//  方案一: 给 document 添加事件，缺陷是如果有很多需要关闭的btn呢？监听事件会一直占着内存</span><br><span class="line">clickMe.addEventListener(&apos;click&apos;, function(e)&#123;</span><br><span class="line">  popover.style.display = &apos;block&apos;</span><br><span class="line">&#125;)</span><br><span class="line">wrapper.addEventListener(&apos;click&apos;, function(e)&#123;</span><br><span class="line">  e.stopPropagation()  // 阻止冒泡，否则冒泡到docunment的监听事件时会执行</span><br><span class="line">&#125;)</span><br><span class="line">document.addEventListener(&apos;click&apos;, function()&#123;</span><br><span class="line">  popover.style.display = &apos;none&apos;</span><br><span class="line">&#125;)</span><br><span class="line">//  方案2：使用jQ，只有点击btn的时候才会对document进行监听，并且只执行一次，</span><br><span class="line">$(clickMe).on(&apos;click&apos;, function() &#123;</span><br><span class="line">  $(popover).show()</span><br><span class="line">  console.log(&apos;show&apos;)</span><br><span class="line">  setTimeout(function() &#123;  // 如果不添加setTimeout的话下面的docuemnt监听事件会执行，在执行clickMe的监听事件冒泡的时候，所以我们要“等一会”</span><br><span class="line">    console.log(&apos;添加 one click&apos;)  // 这里添加了会使得冒泡结束后再执行setTimeout里面的代码</span><br><span class="line">    $(document).one(&apos;click&apos;, function() &#123;</span><br><span class="line">      console.log(&apos;我觉得这里不会执行&apos;)</span><br><span class="line">      console.log(&apos;hide&apos;)</span><br><span class="line">      $(popover).hide()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, 0)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 理解DOM事件</span><br><span class="line">&lt;div class=&quot;red&quot;&gt; &lt;div class=&quot;blue&quot;&gt; &lt;div class=&quot;green&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;yellow&quot;&gt; &lt;div class=&quot;orange&quot;&gt; &lt;div class=&quot;purple&quot;&gt;</span><br><span class="line">          &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">*&#123;margin:0;padding:0;box-sizing:border-box;&#125;</span><br><span class="line">.red.active &#123;background: red; &#125;</span><br><span class="line">.blue.active &#123;background: blue; &#125;</span><br><span class="line">.green.active &#123;background: green; &#125;</span><br><span class="line">.yellow.active &#123;background: yellow; &#125;</span><br><span class="line">.orange.active &#123;background: orange; &#125;</span><br><span class="line">.purple.active &#123;background: purple; &#125;</span><br><span class="line">div &#123;border: 1px solid black; padding: 10px;</span><br><span class="line">  transition: all 0.5s; display: flex;</span><br><span class="line">  flex:1; border-radius: 50%; background: white; &#125;</span><br><span class="line">.red&#123;width: 100vw; height: 100vw; &#125;</span><br><span class="line"></span><br><span class="line">let divs = $(&apos;div&apos;)</span><br><span class="line">let n = 0</span><br><span class="line">for (let i = 0; i &lt; divs.length; i++) &#123;</span><br><span class="line">  divs[i].addEventListener(&apos;click&apos;, () =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      divs[i].classList.add(&apos;active&apos;)</span><br><span class="line">    &#125;, n * 500)</span><br><span class="line">    n += 1</span><br><span class="line">  &#125;, true)</span><br><span class="line">&#125;</span><br><span class="line">for (let i = 0; i &lt; divs.length; i++) &#123;</span><br><span class="line">  divs[i].addEventListener(&apos;click&apos;, () =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      divs[i].classList.remove(&apos;active&apos;)</span><br><span class="line">    &#125;, n * 500)</span><br><span class="line">    n += 1</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="新-jQuery-API"><a href="#新-jQuery-API" class="headerlink" title="新 jQuery API"></a>新 jQuery API</h1><ul>
<li><a href="https://www.jquery123.com/prepend/" target="_blank" rel="noopener">.prepend()</a></li>
<li><a href="https://www.jquery123.com/append/" target="_blank" rel="noopener">.append()</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/28/A31-期中考试（部分）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/28/A31-期中考试（部分）/" itemprop="url">A31-期中考试（部分）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-28T23:10:28+08:00">
                2018-02-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="call、apply、bind"><a href="#call、apply、bind" class="headerlink" title="call、apply、bind"></a>call、apply、bind</h1><p>相同的地方</p>
<ol>
<li>三者都是用来改变函数体内 this 对象的值</li>
<li>第一个参数都是 this 要指向的对象</li>
<li>可以接受更多参数（即第二个开始）来对函数传参<br>不同的地方</li>
<li><p>call 与 apply<br>两者的却别仅在于接受后续参数方式的不同<br>call第一个参数是this值没有变化，其余参数都是直接传递，也就是全部列举出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function sum(x,y)&#123;</span><br><span class="line">  if(x&amp;&amp;y)&#123;</span><br><span class="line">    return (this.a + this.b + x + y)</span><br><span class="line">  &#125; else&#123;</span><br><span class="line">    return (this.a + this.b)     </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var obj1 = &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2</span><br><span class="line">&#125;</span><br><span class="line">var obj2 = &#123;</span><br><span class="line">  c: 3,</span><br><span class="line">  d: 4</span><br><span class="line">&#125;</span><br><span class="line">console.log(sum.call(obj1))  // 3  </span><br><span class="line">console.log(sum.call(obj1, obj2.c, obj2.d))  // 10</span><br></pre></td></tr></table></figure>
<p>apply的第一个参数为this值，第二个参数可以是 Array 的实例，也可以使 arguments 对象，也就是伪数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function sum(x,y)&#123;</span><br><span class="line">  if(x&amp;&amp;y)&#123;</span><br><span class="line">    return (this.a + this.b + x + y)</span><br><span class="line">  &#125; else&#123;</span><br><span class="line">    return (this.a + this.b)      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var obj1 = &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2</span><br><span class="line">&#125;</span><br><span class="line">var obj3 = &#123;  // 伪数组</span><br><span class="line">  0: 3,</span><br><span class="line">  1: 4,</span><br><span class="line">  length:2</span><br><span class="line">&#125;</span><br><span class="line">console.log(sum.apply(obj1))  // 3  </span><br><span class="line">console.log(sum.apply(obj1, obj3))  // 10</span><br><span class="line">console.log(sum.apply(obj1, [3,4])) // 10  传入数组</span><br><span class="line">// 传入 arguments 对象</span><br><span class="line">function sumall(a,b)&#123;</span><br><span class="line">  this.a = 1</span><br><span class="line">  this.b = 2</span><br><span class="line">  return sum.apply(this, arguments)</span><br><span class="line">&#125;</span><br><span class="line">console.log(sumall(3,4))</span><br></pre></td></tr></table></figure>
</li>
<li><p>bind 与前两者不同的返回值<br>函数.call() 和 函数.apply() 都是对函数的直接调用<br>而bind不同，它返回指定了this值的函数<br>它也可以像call那样传参</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function sum(x,y)&#123;</span><br><span class="line">  if(x&amp;&amp;y)&#123;</span><br><span class="line">    return (this.a + this.b + x + y)</span><br><span class="line">  &#125; else&#123;</span><br><span class="line">    return (this.a + this.b)     </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var obj1 = &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2</span><br><span class="line">&#125;</span><br><span class="line">var obj2 = &#123;</span><br><span class="line">  c: 3,</span><br><span class="line">  d: 4</span><br><span class="line">&#125;</span><br><span class="line">var sum2 = sum.bind(obj1)</span><br><span class="line">console.log(sum2())  // 3</span><br><span class="line">console.log(sum2(obj2.c, obj2.d)) // 10</span><br></pre></td></tr></table></figure>
<h1 id="CSS-移动端页面（响应式）"><a href="#CSS-移动端页面（响应式）" class="headerlink" title="CSS-移动端页面（响应式）"></a>CSS-移动端页面（响应式）</h1></li>
</ol>
<h1 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Media_queries" target="_blank" rel="noopener">媒体查询</a></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 样式表中的CSS媒体查询</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  @media (min-width: 769px)&#123;</span><br><span class="line">    body&#123; background-color: purple;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  @media (min-width: 321px) and (max-width: 768px)&#123;</span><br><span class="line">    body&#123; background-color: orange;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  @media (max-width: 320px)&#123;</span><br><span class="line">    body&#123; background-color: red;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">// link元素中的CSS媒体查询</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width: 800px)&quot; href=&quot;example.css&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h1 id="动态-REM"><a href="#动态-REM" class="headerlink" title="动态 REM"></a>动态 REM</h1><h1 id="rem"><a href="#rem" class="headerlink" title="rem"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/length" target="_blank" rel="noopener">rem</a></h1><ol>
<li>这个单位代表根元素的 font-size 大小（例如 <html> 元素的font-size）。</html></li>
<li>rem 与 em 的区别<br>首先理解em的意义，它表示当前元素的font-size的计算值，即em==font-size<br>两者区别：rem 是相对于根元素的 font-size，而 em 是相对于当前元素的font-size</li>
<li>手机端方案的特点<ul>
<li>所有手机显示的界面都是一样的，只是大小不同</li>
<li>1 rem == html font-size == viewport width<br><img src="http://upload-images.jianshu.io/upload_images/9047034-55cb3c7ed029cdb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>一切单位以宽度为基准，就能完美还原设计稿</li>
</ul>
</li>
<li><p>使用 js 动态调整 rem</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;JS Bin&lt;/title&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    // 1 rem 等于一个页面的宽度</span><br><span class="line">    var pageWidth = window.innerWidth</span><br><span class="line">    document.write(&apos;&lt;style&gt;html&#123;font-size: &apos;+pageWidth+&apos;px;&#125;&lt;/style&gt;&apos;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;parent clearfix&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;1&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;2&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;3&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;4&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">// css</span><br><span class="line">*&#123;margin:0;padding:0;&#125;</span><br><span class="line">body&#123;</span><br><span class="line">  // 设置字体大小，不然就变成和页面一样大了</span><br><span class="line">  font-size: 16px;</span><br><span class="line">&#125;</span><br><span class="line">.child&#123;</span><br><span class="line">  background-color: #ddd;</span><br><span class="line">  float: left;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix::after&#123;</span><br><span class="line">  content: &apos;&apos;;</span><br><span class="line">  display: block;</span><br><span class="line">  clear: both;</span><br><span class="line">&#125;</span><br><span class="line">// 所有宽高边距等都用 rem 设置</span><br><span class="line">.child&#123;</span><br><span class="line">  width: 0.4rem;</span><br><span class="line">  height: 0.2rem;</span><br><span class="line">  margin: 0.05rem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，不论手机宽度如何，比例仍然是一样的，只是大小不同<br>另外，直接将rem与页面宽度等同，太大了，设置css都要使用小数，很麻烦<br>所以可以设置的小一点，比如百分之一，但是这样可能会出现一个新的问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var pageWidth = window.innerWidth</span><br><span class="line">document.write(&apos;&lt;style&gt;html&#123;font-size: &apos;+ pageWidth/100 +&apos;px;&#125;&lt;/style&gt;&apos;)</span><br></pre></td></tr></table></figure>
<p>得到的font-size值太小，别忘了chrome默认限制font-size最小为12px，于是页面就变‘大了’<br>为了防止这样的情况，不能除以太大的数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var pageWidth = window.innerWidth</span><br><span class="line">document.write(&apos;&lt;style&gt;html&#123;font-size: &apos;+ pageWidth/10 +&apos;px;&#125;&lt;/style&gt;&apos;)</span><br></pre></td></tr></table></figure>
<p>一般而言，10比较合适，因为智能手机屏幕通常在300-400px左右，除以10后在30-40，不会出现因为‘12px原则’而被‘放大页面’</p>
</li>
<li><p>rem 可以与其他单位同时存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">font-size: 16px;</span><br><span class="line">border: 1px solid red;</span><br><span class="line">width: 0.5rem;</span><br></pre></td></tr></table></figure>
<p>比如 font-size，如果使用rem，会在屏幕很小的时候变得很难看<br>还有border，1px转换rem在屏幕太小的时候仍然是1px，因为浏览器最小就是1px了<br>这里建议太小的单位，或者如font-size这样的（字体太大太小都不好看），可以使用其它单位与rem混合使用<br>比如px、em</p>
</li>
<li><p>在 SCSS 里使用 PX2REM<br>这个是node-sass,<br>npm config set registry <a href="https://registry.npm.taobao.org/" target="_blank" rel="noopener">https://registry.npm.taobao.org/</a><br>touch ~/.bashrc<br>echo ‘export SASS_BINARY_SITE=”<a href="https://npm.taobao.org/mirrors/node-sass" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/node-sass</a>“‘ &gt;&gt; ~/.bashrc<br>source ~/.bashrc<br>npm i -g node-sass<br>mkdir ~/Desktop/scss-demo<br>cd ~/Desktop/scss-demo<br>mkdir scss css<br>touch scss/style.scss<br>start scss/style.scss<br>node-sass -wr scss -o css</p>
<p>编辑 scss 文件就会自动得到 css 文件</p>
<p>在 scss 文件里添加</p>
<p>@function px( $px ){<br> @return $px/$designWidth*10 + rem;<br>}</p>
<p>$designWidth : 640; // 640 是设计稿的宽度，你要根据设计稿的宽度填写。如果设计师的设计稿宽度不统一，就杀死设计师，换个新的。</p>
<p>.child{<br> width: px(320);<br> height: px(160);<br> margin: px(40) px(40);<br> border: 1px solid red;<br> float: left;<br> font-size: 1.2em;<br>}<br>即可实现 px 自动变 rem<br><a href="https://xiedaimala.com/courses/003b1951-22af-4821-ad80-d2880c0074eb/tasks/37a886be-169c-4a99-8bfb-1a993be8119d" target="_blank" rel="noopener">饥人谷教学视频</a></p>
</li>
</ol>
<h1 id="一些知识点"><a href="#一些知识点" class="headerlink" title="一些知识点"></a>一些知识点</h1><ul>
<li>如果不给页面添加<code>font-size</code>，则默认字体大小为16px</li>
<li>Chrome有最小字号设置，一般默认为12px，这个时候即使你设置更小的像素也无法生效，依然是12px（仅chrome）</li>
</ul>
<h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><ol>
<li>什么是闭包<br>闭包就是 函数和函数访问的函数外部变量的总和，<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var num = 100</span><br><span class="line">function addNum()&#123;</span><br><span class="line">  num += 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>在上面，变量num+函数addNum就是闭包<br>实际上我们经常在用的东西</p>
<ol>
<li>为什么要用闭包<br>有时候我们需要隐藏变量，而不是直接访问他，来避免外部污染，<br>通过函数来模拟块，在函数内部建立一个子函数来访问隐藏的变量，<br>return这个子函数给外部的变量进行调用，来对隐藏变量进行操作，<br>也因此，隐藏变量无法被垃圾回收销毁，在ie中会因为bug而出现内存泄漏<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123;</span><br><span class="line">  var num = 1</span><br><span class="line">  return function setNum(n)&#123;</span><br><span class="line">    num = n</span><br><span class="line">    return num</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var sn = test()</span><br><span class="line">console.log( sn(1) )</span><br><span class="line">console.log( sn(2) )</span><br><span class="line">console.log( sn(3) )</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="请说出至少三种排序的思路，这三种排序的时间复杂度分别为"><a href="#请说出至少三种排序的思路，这三种排序的时间复杂度分别为" class="headerlink" title="请说出至少三种排序的思路，这三种排序的时间复杂度分别为"></a>请说出至少三种排序的思路，这三种排序的时间复杂度分别为</h1><p>O(n*n)<br>O(n log2 n)<br>O(n + max)</p>
<ol>
<li>O(n*n)<br>冒泡排序：比较相邻的元素，如果第一个比第二个大，就交换他们两个，对每一对相邻的元素做同样的工作，从开始第一对到结尾最后一对，这步会让后一位元素就是最大的数，对所有元素重复以上步骤，除了最后一个，直到没有任何一堆数字需要比较</li>
<li>O(n log2 n)<br>快速排序：以一个元素为基准，重新排序数列，比基准值小的元素放左边，大的放右边，然后在对左半边和右半边重复以上操作，直到只有一个数字为止</li>
<li>O(n + max)<br>基数排序：将所有待比较数值（正整数）统一为同样的数位长度，数位较短的数前面补零。然后，从最低位开始，依次进行一次排序。这样从最低位排序一直到最高位排序完成以后，数列就变成一个有序序列。</li>
</ol>
<h1 id="著名前端面试题："><a href="#著名前端面试题：" class="headerlink" title="著名前端面试题："></a>著名前端面试题：</h1><p>一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？</p>
<ol>
<li>DNS解析<h1 id="DNS解析的过程就是寻找哪台机器上有你需要资源的过程。当你在浏览器地址栏输入一个地址比如：www-baidu-com，其实并不是百度真正的地址，这只是方便人们记忆和理解所设计的，真正的地址是IP地址，而www-baidu-com是域名（ip地址和域名并不是一一对应的），DNS解析就是将你输入的域名解析成ip地址。"><a href="#DNS解析的过程就是寻找哪台机器上有你需要资源的过程。当你在浏览器地址栏输入一个地址比如：www-baidu-com，其实并不是百度真正的地址，这只是方便人们记忆和理解所设计的，真正的地址是IP地址，而www-baidu-com是域名（ip地址和域名并不是一一对应的），DNS解析就是将你输入的域名解析成ip地址。" class="headerlink" title="DNS解析的过程就是寻找哪台机器上有你需要资源的过程。当你在浏览器地址栏输入一个地址比如：www.baidu.com，其实并不是百度真正的地址，这只是方便人们记忆和理解所设计的，真正的地址是IP地址，而www.baidu.com是域名（ip地址和域名并不是一一对应的），DNS解析就是将你输入的域名解析成ip地址。"></a>DNS解析的过程就是寻找哪台机器上有你需要资源的过程。当你在浏览器地址栏输入一个地址比如：www.baidu.com，其实并不是百度真正的地址，这只是方便人们记忆和理解所设计的，真正的地址是IP地址，而www.baidu.com是域名（ip地址和域名并不是一一对应的），DNS解析就是将你输入的域名解析成ip地址。</h1><h1 id="查找（解析）过程：搜索浏览器自己的DNS缓存-–-gt-搜索操作系统中的DNS缓存-–-gt-搜索操作系统的hosts文件-–-gt-发送域名到本地域名服务器查询-–-gt-向根域名服务器查询-–-gt-向顶级域名服务器查询，"><a href="#查找（解析）过程：搜索浏览器自己的DNS缓存-–-gt-搜索操作系统中的DNS缓存-–-gt-搜索操作系统的hosts文件-–-gt-发送域名到本地域名服务器查询-–-gt-向根域名服务器查询-–-gt-向顶级域名服务器查询，" class="headerlink" title="查找（解析）过程：搜索浏览器自己的DNS缓存 –&gt; 搜索操作系统中的DNS缓存 –&gt; 搜索操作系统的hosts文件 –&gt; 发送域名到本地域名服务器查询 –&gt; 向根域名服务器查询 –&gt; 向顶级域名服务器查询，"></a>查找（解析）过程：搜索浏览器自己的DNS缓存 –&gt; 搜索操作系统中的DNS缓存 –&gt; 搜索操作系统的hosts文件 –&gt; 发送域名到本地域名服务器查询 –&gt; 向根域名服务器查询 –&gt; 向顶级域名服务器查询，</h1>得到ip地址，返回给浏览器，同时浏览器将ip地址缓存</li>
<li>TCP连接<br>得到服务器的ip地址后，接下来开始连接，总的来说需要经历以下三个过程（简称三次握手）：<ol>
<li>主机想服务器发送一个建立连接的请求（您好，我想认识您）；</li>
<li>服务器接到请求后发送同意连接的信号（好的，很高兴认识您）；</li>
<li>主机接到同意连接的信号后，再次向服务器发送了确认信号（我也很高兴认识您），自此，主机与服务器建立了连接</li>
</ol>
</li>
<li>发送HTTP请求<br>浏览器根据URL内容生成HTTP请求，HTTP报文被包裹在TCP报文中发送 ，服务器收到TCP报文是会解包提取出HTTP报文，它主要由三部分组成<ol>
<li>请求行：请求方法 资源路径 HTTP协议版本</li>
<li>请求报头：请求报头允许客户端向服务器传递请求的附加信息和客户端自身的信息。</li>
<li>请求正文</li>
</ol>
</li>
<li>服务器处理请求并返回HTTP报文<br>HTTP响应报文也是由三部分组成: 状态码, 响应报头和响应报文。</li>
<li>浏览器解析渲染页面<br>浏览器是一个边解析边渲染的过程。首先浏览器解析HTML文件构建DOM树，然后解析CSS文件构建渲染树，等到渲染树构建完成后，浏览器开始布局渲染树并将其绘制到屏幕上。</li>
<li>连接结束<ol>
<li>主机向服务器发送一个断开连接的请求（不早了，我该走了）；</li>
<li>服务器接到请求后发送确认收到请求的信号（知道了）；</li>
<li>服务器向主机发送断开通知（我也该走了）；</li>
<li>主机接到断开通知后断开连接并反馈一个确认信号（嗯，好的），服务器收到确认信号后断开连接；</li>
</ol>
</li>
</ol>
<h1 id="如何实现数组去重？"><a href="#如何实现数组去重？" class="headerlink" title="如何实现数组去重？"></a>如何实现数组去重？</h1><p>假设有数组 array = [1,5,2,3,4,2,3,1,3,4]<br>你要写一个函数 unique，使得<br>unique(array) 的值为 [1,5,2,3,4]<br>也就是把重复的值都去掉，只保留不重复的值。</p>
<p>要求：</p>
<p>不要做多重循环，只能遍历一次<br>请给出两种方案，一种能在 ES 5 环境中运行，一种能在 ES 6 环境中运行（提示 ES 6 环境多了一个 Set 对象）</p>
<p>答案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//  ES5:</span><br><span class="line">var array = [1,5,2,3,4,2,3,1,3,4]</span><br><span class="line">function unique(arr)&#123;</span><br><span class="line">  var tempArr = []</span><br><span class="line">  var hash = &#123;&#125;</span><br><span class="line">  for(var i=0; i&lt;arr.length; i++)&#123;</span><br><span class="line">    if(hash[arr[i]] === undefined)&#123;</span><br><span class="line">      tempArr.push(arr[i])</span><br><span class="line">      hash[arr[i]] = 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return tempArr</span><br><span class="line">&#125;</span><br><span class="line">console.log(unique(array))</span><br><span class="line"></span><br><span class="line">//  ES6:</span><br><span class="line">var arr = [1,5,2,3,4,2,3,1,3,4]</span><br><span class="line">function unique(array) &#123;</span><br><span class="line">    return [...new Set(array)]</span><br><span class="line">&#125;</span><br><span class="line">console.log(unique(arr))</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/06/A30-无缝轮播/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/06/A30-无缝轮播/" itemprop="url">A30-无缝轮播</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-06T20:09:08+08:00">
                2018-02-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="任务代码"><a href="#任务代码" class="headerlink" title="任务代码"></a><a href="https://github.com/zerolhao/task-code/tree/master/A30-jQuery-seamless-carousel" target="_blank" rel="noopener">任务代码</a></h1><h1 id="预览"><a href="#预览" class="headerlink" title="预览"></a><a href="https://zerolhao.github.io/task-code/A30-jQuery-seamless-carousel/index.html" target="_blank" rel="noopener">预览</a></h1><h1 id="用到的新-API"><a href="#用到的新-API" class="headerlink" title="用到的新 API"></a>用到的新 API</h1><ol>
<li><code>.on(&#39;transitionend&#39;)</code> -<a href="https://developer.mozilla.org/zh-CN/docs/Web/Events/transitionend" target="_blank" rel="noopener">link</a></li>
<li>更多事件见-<a href="事件类型一览表">事件类型一览表</a></li>
<li><code>.one()</code> 为 元素的事件添加处理函数。处理函数在每个元素上每种事件类型最多执行一次。 -<a href="https://www.jquery123.com/one/" target="_blank" rel="noopener">link</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/template_strings" target="_blank" rel="noopener">ES6-模板字符串-表达式插补(<code>${expression}</code>)</a></li>
</ol>
<h1 id="DOM事件模型"><a href="#DOM事件模型" class="headerlink" title="DOM事件模型"></a>DOM事件模型</h1><p><a href="https://www.w3.org/DOM/DOMTR" target="_blank" rel="noopener">W3C</a><br>DOM Level 0: 在 W3C 出来之前的事实规范，比如 onclick，onmouseenter……或者直接在html里面写js函数<br>DOM Level 1: W3C整合之前的DOM0并没有做任何变更<br>DOM Level 2: 提供了 addEventListener 和 removeEventListener 等函数，这两个函数和onclick不同，onclick是属性，写第二个就会覆盖上一个，而addEventListener你可以认为是一个事件队列，一个事件一个队列，你可以往队列里添加多个函数，他们会按照顺序依次执行，removeEventListener则是将函数从队列中删除<br>同时，DOM2添加了两个阶段，捕获和冒泡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;grand&quot;&gt;</span><br><span class="line">  grand</span><br><span class="line">  &lt;div id=&quot;parent&quot;&gt;</span><br><span class="line">    parent</span><br><span class="line">    &lt;div id=&quot;child&quot;&gt;child&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// 先捕获，后冒泡</span><br><span class="line">// 第三个参数默认为false，即冒泡阶段执行函数</span><br><span class="line">grand.addEventListener(&apos;click&apos;, function()&#123;console.log(grand)&#125;)</span><br><span class="line">parent.addEventListener(&apos;click&apos;, function()&#123;console.log(parent)&#125;)</span><br><span class="line">child.addEventListener(&apos;click&apos;, function()&#123;console.log(child)&#125;)</span><br><span class="line">// 点击child div</span><br><span class="line">// child  parent  grand</span><br><span class="line"></span><br><span class="line">// 第三个参数为 true，即捕获阶段执行函数</span><br><span class="line">grand.addEventListener(&apos;click&apos;, function()&#123;console.log(grand)&#125;, true)</span><br><span class="line">parent.addEventListener(&apos;click&apos;, function()&#123;console.log(parent)&#125;, true)</span><br><span class="line">child.addEventListener(&apos;click&apos;, function()&#123;console.log(child)&#125;, true)</span><br><span class="line">// 点击child div</span><br><span class="line">// grand parent child</span><br><span class="line"></span><br><span class="line">// 如果是同一个div的话</span><br><span class="line">child.addEventListener(&apos;click&apos;, function()&#123;console.log(child1)&#125;, false)</span><br><span class="line">child.addEventListener(&apos;click&apos;, function()&#123;console.log(child2)&#125;, true)</span><br><span class="line">// 点击</span><br><span class="line">// child1 dhild2</span><br><span class="line">// 同一个不管第三个参数，他们按js代码书写顺序执行</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/9047034-7aa8522b80cdf05d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/27/A29-用jQuery做个轮播/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/27/A29-用jQuery做个轮播/" itemprop="url">A29-用jQuery做个轮播</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-27T23:12:29+08:00">
                2018-01-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="这次我们将用jQuery做一个轮播"><a href="#这次我们将用jQuery做一个轮播" class="headerlink" title="这次我们将用jQuery做一个轮播"></a>这次我们将用jQuery做一个轮播</h1><p>在遵循原则：<strong>内容(HTML)、样式(CSS)、行为(JavaScript)分离</strong>的情况下</p>
<h2 id="面试套路"><a href="#面试套路" class="headerlink" title="面试套路"></a>面试套路</h2><p>如果被问到你对于前端内容、样式、行为分离的理解。<br>我们当然认为这是理所当然的，但是这么回答显然不行。<br>所以，<strong>我们可以反着回答</strong>，如果不分离的话会有什么坏处，以此论证需要分离。<br>例如：</p>
<ul>
<li><p>HTML负责样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body bgcolor=&quot;gray&quot;&gt;</span><br><span class="line">  &lt;center&gt;</span><br><span class="line">    &lt;font color=&quot;red&quot; size=&quot;20&quot;&gt;你好&lt;/font&gt;</span><br><span class="line">  &lt;center&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>现在，有的标签是为了表示样式的，有的标签是为了表示内容的，这使得我们难以区分这些标签真正的逻辑结构</p>
</li>
<li><p>CSS 表示内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;div id=&quot;x&quot;&gt;&lt;/div&gt;</span><br><span class="line">// css</span><br><span class="line">div::after&#123; content: &apos;你好&apos;; &#125;</span><br><span class="line">// js</span><br><span class="line">console.log(x.innerText) // 什么都没有，空的</span><br></pre></td></tr></table></figure>
<p>使用css表示内容，会导致用户无法用鼠标选中它，同时，js也无法获取它的内容</p>
</li>
<li>CSS 表示行为<br>使用css表示复杂的行为，会导致页面变得很慢很慢<br>优化的原则之一：不要使用IE发明的CSS Expressions</li>
<li><p>JS 表示 CSS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;div id=&quot;x&quot;&gt;&lt;/div&gt;</span><br><span class="line">// js</span><br><span class="line">var $div = $(&apos;#x&apos;)</span><br><span class="line">$div.hide() // 影藏很好理解，display:none</span><br><span class="line">$div.show() // 显示呢？block？可如果我本来是flex呢？或者inline-flex呢？</span><br><span class="line">// jQuery 为了处理这个问题，在 hide() 时获取了你的 display 值</span><br><span class="line">// 使得 flex 在经过 hide() show()之后依然是 flex</span><br><span class="line">// 可是，如果本来是 none 呢？</span><br><span class="line">// css</span><br><span class="line">div&#123; display:none; &#125;</span><br><span class="line">// 测试结果显示 show() 之后是 block,也就是说 show() 默认 block</span><br></pre></td></tr></table></figure>
<p>这种结果显然不符合我们的预期，这里，建议使用添加 class 的方式来控制，js 只负责行为，它不知道一个div应该怎么show，block？flex？<br>显示还是不显示？那是 css 的活。<br><code>$div.addClass(&#39;active&#39;)</code></p>
</li>
</ul>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><ol>
<li>将图片全部放到一个div里，把图片放平，图片最好是一样大小的</li>
<li>然后用一个窗口来看图片，图片从左到右挨个出现，就好像以前的电影胶带</li>
<li>有了思路，剩下的就是实现和改bug，这次是用jq来写，会出现很多不认识的api，直接查文档就行了</li>
</ol>
<h1 id="关于封装"><a href="#关于封装" class="headerlink" title="关于封装"></a>关于封装</h1><ol>
<li>从 API 开始思考</li>
<li>尽量能让人看见就明白是干嘛的</li>
</ol>
<h1 id="成果"><a href="#成果" class="headerlink" title="成果"></a>成果</h1><ul>
<li><a href="https://zerolhao.github.io/task-code/A29-jQuery-carousel/index.html" target="_blank" rel="noopener">预览</a></li>
<li><a href="https://github.com/zerolhao/task-code/tree/master/A29-jQuery-carousel" target="_blank" rel="noopener">代码</a></li>
</ul>
<h1 id="本次任务用到的-jQuery-API"><a href="#本次任务用到的-jQuery-API" class="headerlink" title="本次任务用到的 jQuery API"></a>本次任务用到的 jQuery API</h1><ol>
<li><code>.on()</code> -<a href="https://www.jquery123.com/on/" target="_blank" rel="noopener">link</a></li>
<li><code>index()</code> -<a href="https://www.jquery123.com/index/" target="_blank" rel="noopener">link</a></li>
<li><code>.eq()</code> -<a href="https://www.jquery123.com/eq/" target="_blank" rel="noopener">link</a></li>
<li><code>.trigger()</code> -<a href="https://www.jquery123.com/trigger/" target="_blank" rel="noopener">link</a></li>
<li><code>.addClass()</code> -<a href="https://www.jquery123.com/addClass/" target="_blank" rel="noopener">link</a></li>
<li><code>.removeClass()</code> -<a href="https://www.jquery123.com/removeClass/" target="_blank" rel="noopener">link</a></li>
<li><code>.siblings()</code> -<a href="https://www.jquery123.com/siblings/" target="_blank" rel="noopener">link</a></li>
<li><code>.css()</code> -<a href="https://www.jquery123.com/css/" target="_blank" rel="noopener">link</a></li>
</ol>
<h1 id="优化原则"><a href="#优化原则" class="headerlink" title="优化原则"></a>优化原则</h1><ol>
<li>不使用 CSS 来表示复杂的行为，不要使用IE发明的CSS Expressions。</li>
<li>如果你已经知道图片的宽高了，那么最好是写在上面<code>&lt;img width=xx height=xx&gt;&lt;/img&gt;</code>，这样浏览器就会少一次让后面的图片或者其它元素让位的过程。</li>
</ol>
<h1 id="奇葩bug"><a href="#奇葩bug" class="headerlink" title="奇葩bug"></a>奇葩bug</h1><ol>
<li>css tansform: translateX();在浏览器放大页面下出现bug，抖动</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/26/A28-JQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/26/A28-JQuery/" itemprop="url">A28-JQuery</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-26T23:43:33+08:00">
                2018-01-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="这次我们自己实现一个类似Query的API（简化版）"><a href="#这次我们自己实现一个类似Query的API（简化版）" class="headerlink" title="这次我们自己实现一个类似Query的API（简化版）"></a>这次我们自己实现一个类似Query的API（简化版）</h1><h2 id="封装函数"><a href="#封装函数" class="headerlink" title="封装函数"></a>封装函数</h2><h3 id="获取一个元素所有兄弟元素"><a href="#获取一个元素所有兄弟元素" class="headerlink" title="获取一个元素所有兄弟元素"></a>获取一个元素所有兄弟元素</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li id=&quot;item1&quot;&gt;选项1&lt;/li&gt;</span><br><span class="line">  &lt;li id=&quot;item2&quot;&gt;选项2&lt;/li&gt;</span><br><span class="line">  &lt;li id=&quot;item3&quot;&gt;选项3&lt;/li&gt;</span><br><span class="line">  &lt;li id=&quot;item4&quot;&gt;选项4&lt;/li&gt;</span><br><span class="line">  &lt;li id=&quot;item5&quot;&gt;选项5&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">// js, 假设我们获取 item3 的所有兄弟元素</span><br><span class="line">var allChildren = item3.parentNode.children</span><br><span class="line">var array = &#123;</span><br><span class="line">  length: 0;</span><br><span class="line">&#125;</span><br><span class="line">for(let i=0; i &lt; allChildren.length; i++)&#123;</span><br><span class="line">  if(allChildren[i] !== item3)&#123;</span><br><span class="line">    array[array.length] = allChildren[i]</span><br><span class="line">    array.length += 1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(array)  // 测试</span><br><span class="line">// 这样就获得 item3的所有兄弟元素了</span><br><span class="line">// 接下来我们将这段代码封装起来</span><br><span class="line">function getSiblings(node)&#123; /* API */</span><br><span class="line">  var allChildren = node.parentNode.children</span><br><span class="line">  var array = &#123;</span><br><span class="line">    length: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  for(let i=0; i &lt; allChildren.length; i++)&#123;</span><br><span class="line">    if(allChildren[i] !== node)&#123;</span><br><span class="line">      array[array.length] = allChildren[i]</span><br><span class="line">      array.length += 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return array  // 返回一个伪数组</span><br><span class="line">&#125;</span><br><span class="line">console.log(getSiblings(item2)) // test</span><br><span class="line">// 这样，一个api就做好了，它可以获得一个元素的所有兄弟元素</span><br></pre></td></tr></table></figure>
<h3 id="接下来我们开始给一个元素添加-class"><a href="#接下来我们开始给一个元素添加-class" class="headerlink" title="接下来我们开始给一个元素添加  class"></a>接下来我们开始给一个元素添加  class</h3><p>仍然是上面那段 <code>html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// 为元素添加多个 class</span><br><span class="line">item3.classList.add(&apos;a&apos;)</span><br><span class="line">item3.classList.add(&apos;b&apos;)</span><br><span class="line">item3.classList.add(&apos;c&apos;)</span><br><span class="line"></span><br><span class="line">// 简洁一点的写法</span><br><span class="line">var classes = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]</span><br><span class="line">classes.forEach( value =&gt; item3.classList.add(value) )</span><br><span class="line"></span><br><span class="line">// 这次我们既可以 add 也可以 remove</span><br><span class="line">var classes = &#123;&apos;a&apos;:true, &apos;b&apos;:false, &apos;c&apos;:true&#125;</span><br><span class="line">for(let key in classes)&#123;</span><br><span class="line">  if(classes[key])&#123;</span><br><span class="line">    item3.classList.add(key)</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    item3.classList.remove(key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 封装成函数</span><br><span class="line">function addClass(node, classes)&#123;</span><br><span class="line">  for(let key in classes)&#123;</span><br><span class="line">    /*</span><br><span class="line">    if(classes[key])&#123;</span><br><span class="line">      node.classList.add(key)</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">      node.classList.remove(key)</span><br><span class="line">    &#125;</span><br><span class="line">    */</span><br><span class="line">    // 代码优化守则1：如果出现类似的代码，就存在优化的可能</span><br><span class="line">    // 优化这段代码</span><br><span class="line">    let methodName = class[key] ? &apos;add&apos; : &apos;remove&apos;</span><br><span class="line">    node.classList[methodName](key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">addClass(item3, &#123;a:true,b:false,c:true&#125;) // test</span><br></pre></td></tr></table></figure></p>
<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><p>上面两个函数是有关联性的，他们都是对node进行操作<br>现在我们来声明一个变量，将它们放进去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">window.zdom = &#123;&#125;</span><br><span class="line"></span><br><span class="line">zdom.getSiblings = function(node)&#123;</span><br><span class="line">  var allChildren = node.parentNode.children</span><br><span class="line">  var array = &#123;</span><br><span class="line">    length: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  for(let i=0; i &lt; allChildren.length; i++)&#123;</span><br><span class="line">    if(allChildren[i] !== node)&#123;</span><br><span class="line">      array[array.length] = allChildren[i]</span><br><span class="line">      array.length += 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return array  // 返回一个伪数组</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">zdom.addClass = function(node, classes)&#123;</span><br><span class="line">  for(let key in classes)&#123;</span><br><span class="line">    let methodName = class[key] ? &apos;add&apos; : &apos;remove&apos;</span><br><span class="line">    node.classList[methodName](key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">zdom.getSiblings(item3)</span><br><span class="line">zdom.addClass(item3,&#123;a: true, b: true, c: flase&#125;)</span><br></pre></td></tr></table></figure></p>
<p>有一个库就是这样的方式：yui<br>这就叫做命名空间，也是一种设计模式。所有的套路都是设计模式，就比如哈希，就比如数组。<br>这种常用的模式或者组合就叫做设计模式。<br>为什么要命名空间：想想JQuery，那么多api，难道对别人说的时候要一个一个报出来么，所以一个统称的名字就很必要了，同时，你怎么知道别人没写addClass呢？全部放到window里不会产生覆盖么，所以，<br>如果没有命名空间：</p>
<ol>
<li>别人不知道你的库叫什么</li>
<li>你会不知不觉把所有全局变量都覆盖了</li>
</ol>
<h2 id="将-node-放在前面"><a href="#将-node-放在前面" class="headerlink" title="将 node 放在前面"></a>将 node 放在前面</h2><p>相较于命名空间的调用方式(这种方法已经过时了)<br><code>zdom.getSiblings(item3)</code><br><code>zdom.addClass(item3,{a: true, b: true, c: flase})</code><br>我们认为这样的方式更好：<br><code>item3.getSiblings()</code><br><code>item3.addClass({a: true, b: true, c: flase})</code></p>
<p>这时候，就需要用到原型，来扩展 Node 接口，<br><strong>这是第一种方法</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Node.prototype.getSiblings = function()&#123;</span><br><span class="line">  var allChildren = this.parentNode.children</span><br><span class="line">  var array = &#123;</span><br><span class="line">    length: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  for(let i=0; i &lt; allChildren.length; i++)&#123;</span><br><span class="line">    if(allChildren[i] !== this)&#123;</span><br><span class="line">      array[array.length] = allChildren[i]</span><br><span class="line">      array.length += 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return array  // 返回一个伪数组</span><br><span class="line">&#125;</span><br><span class="line">Node.prototype.addClass = function(classes)&#123;</span><br><span class="line">  for(let key in classes)&#123;</span><br><span class="line">    let methodName = class[key] ? &apos;add&apos; : &apos;remove&apos;</span><br><span class="line">    this.classList[methodName](key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 隐式指定 this</span><br><span class="line">item3.getSiblings()</span><br><span class="line">item3.addClass(&#123;a: true, b: true, c: flase&#125;)</span><br><span class="line">// 显式指定 this</span><br><span class="line">item3.getSiblings.call(item3)</span><br><span class="line">item3.addClass.call(item3, &#123;a: true, b: true, c: flase&#125;)</span><br></pre></td></tr></table></figure></p>
<p>但是改写Node.prototype可能会出现覆盖情况，所以又有了<strong>第二种方法</strong>：<br>这种叫做「无侵入」<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">window.Node2 = function(node)&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    getSiblings: function()&#123;</span><br><span class="line">      var allChildren = node.parentNode.children</span><br><span class="line">      var array = &#123;</span><br><span class="line">        length: 0;</span><br><span class="line">      &#125;</span><br><span class="line">      for(let i=0; i &lt; allChildren.length; i++)&#123;</span><br><span class="line">        if(allChildren[i] !== node)&#123;</span><br><span class="line">          array[array.length] = allChildren[i]</span><br><span class="line">          array.length += 1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return array  // 返回一个伪数组</span><br><span class="line">    &#125;,</span><br><span class="line">    addClass: function(classes)&#123;</span><br><span class="line">      for(let key in classes)&#123;</span><br><span class="line">        let methodName = class[key] ? &apos;add&apos; : &apos;remove&apos;</span><br><span class="line">        node.classList[methodName](key)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var node2 = Node2(item3)</span><br><span class="line">node2.getSiblings()</span><br><span class="line">node2.addClass(&#123;a: true, b: true, c: flase&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="给-Node2-换个名字-jQuery"><a href="#给-Node2-换个名字-jQuery" class="headerlink" title="给 Node2 换个名字 jQuery"></a>给 Node2 换个名字 jQuery</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">window.jQuery = function(node)&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    getSiblings: function()&#123; ... &#125;,</span><br><span class="line">    addClass: function(classes)&#123; ... &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var node2 = jQuery(item3)</span><br><span class="line">node2.getSiblings()</span><br><span class="line">node2.addClass(&#123;a: true, b: true, c: flase&#125;)</span><br></pre></td></tr></table></figure>
<p>除了名字换了一下，和刚才的代码并没有区别<br>只是Node2变成了jQuery<br><strong>jQuery就是一个这么升级了的DOM</strong><br><strong>它接受一个旧的节点，然后返回你一个新的对象</strong><br>这个新的对象有新的API，它的内部实现依然是去调用旧的API，只是变得更好用、更方便（一句话相当于以前十句话）<br>然而jQuery的厉害不止于此，它还可以接受选择器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">window.jQuery = function(nodeOrSelector)&#123;</span><br><span class="line">  let node</span><br><span class="line">  // 类型检测</span><br><span class="line">  if(typeof nodeOrSelector === &apos;string&apos;)&#123;</span><br><span class="line">    node = document.querySelector(nodeOrSelector)</span><br><span class="line">  &#125; else&#123;</span><br><span class="line">    node = nodeOrSelector</span><br><span class="line">  &#125;</span><br><span class="line">  return &#123;</span><br><span class="line">    getSiblings: function()&#123;</span><br><span class="line">      var allChildren = node.parentNode.children</span><br><span class="line">      var array = &#123;  length: 0; &#125;</span><br><span class="line">      for(let i=0; i &lt; allChildren.length; i++)&#123;</span><br><span class="line">        if(allChildren[i] !== node)&#123; // 注意这里用到了闭包，匿名函数访问了外面的 node</span><br><span class="line">          array[array.length] = allChildren[i]  // node 和 匿名函数组成了闭包（下面的函数同理）</span><br><span class="line">          array.length += 1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return array  // 返回一个伪数组</span><br><span class="line">    &#125;,</span><br><span class="line">    addClass: function(classes)&#123;</span><br><span class="line">      for(let key in classes)&#123;</span><br><span class="line">        let methodName = class[key] ? &apos;add&apos; : &apos;remove&apos;</span><br><span class="line">        node.classList[methodName](key)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var node2 = jQuery(&apos;#item3&apos;)</span><br><span class="line">// var node2 = jQuery(&apos;ul &gt; li:nth-child(3)&apos;)</span><br><span class="line">node2.addClass(&#123;a: true, b: true, c: flase&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="那么如果要操作多个节点呢？"><a href="#那么如果要操作多个节点呢？" class="headerlink" title="那么如果要操作多个节点呢？"></a>那么如果要操作多个节点呢？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">window.jQuery = function(nodeOrSelector)&#123;</span><br><span class="line">  let nodes = &#123;&#125;</span><br><span class="line">  if(typeof nodeOrSelector === &apos;string&apos;)&#123;</span><br><span class="line">    let temp = document.querySelectorAll(nodeOrSelector) // 伪数组</span><br><span class="line">    for(let i=0; i &lt; temp.length; i++)&#123; // 如果你想要一个纯净的伪数组不要那些其它属性方法</span><br><span class="line">      nodes[i] = temp[i]</span><br><span class="line">    &#125;</span><br><span class="line">    node.length = temp.length</span><br><span class="line">  &#125; else if(nodeOrSelector instanceof Node) &#123;</span><br><span class="line">    nodes = &#123;0: nodeOrSelector, length: 1&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  nodes.getSiblings = function()&#123;/*太麻烦不做了*/&#125;</span><br><span class="line">  nodes.addClass = function(classes)&#123;</span><br><span class="line">    classes.forEach((value) =&gt; &#123;</span><br><span class="line">      for(let i=0; i &lt; nodes.length; i++)&#123;</span><br><span class="line">        nodes[i].classList.add(value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  // 添加几个有用的 jQuery Api</span><br><span class="line">  nodes.getText = function()&#123;</span><br><span class="line">    let texts = []</span><br><span class="line">    for(let i=0; i &lt; nodes.length; i++)&#123;</span><br><span class="line">      texts.push(nodes[i].textContent)</span><br><span class="line">    &#125;</span><br><span class="line">    return texts</span><br><span class="line">  &#125;</span><br><span class="line">  nodes.setText = function(text)&#123;</span><br><span class="line">    for(let i=0; i &lt; nodes.length; i++)&#123;</span><br><span class="line">      nodes[i].textContent = text</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // 然而实际上 jQuery 合并了 get和set</span><br><span class="line">  // 类似的 api jquery 有很多</span><br><span class="line">  nodes.text = function(text)&#123;</span><br><span class="line">    // jQuery 认为，你没有设置参数，那就是要获取 text，</span><br><span class="line">    // 如果有参数，那就是要设置 text</span><br><span class="line">    if(text === undefined)&#123;</span><br><span class="line">      let texts = []</span><br><span class="line">      for(let i=0; i &lt; nodes.length; i++)&#123;</span><br><span class="line">        texts.push(nodes[i].textContent)</span><br><span class="line">      &#125;</span><br><span class="line">      return texts</span><br><span class="line">    &#125; else&#123;</span><br><span class="line">      for(let i=0; i &lt; nodes.length; i++)&#123;</span><br><span class="line">        nodes[i].textContent = text</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return nodes</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var node2 = jQuery(&apos;ul &gt; li&apos;)</span><br><span class="line">node2.addClass([&apos;red&apos;])</span><br><span class="line">var text = node2.text()</span><br><span class="line">node2.text(&apos;hi&apos;)</span><br></pre></td></tr></table></figure>
<h4 id="缩写-alias"><a href="#缩写-alias" class="headerlink" title="缩写 alias"></a>缩写 alias</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.$ = jQuery</span><br><span class="line">// 建议使用 jQuery 构造出来的 对象都在前面加一个 $ ,以表示它是由$构造的，避免和正常的弄混</span><br><span class="line">var $node2 = $(&apos;ul&gt;li&apos;)</span><br></pre></td></tr></table></figure>
<h1 id="知道了-jQuery-是怎么实现的，现在去看看真正的-jQuery吧-MDN"><a href="#知道了-jQuery-是怎么实现的，现在去看看真正的-jQuery吧-MDN" class="headerlink" title="知道了 jQuery 是怎么实现的，现在去看看真正的 jQuery吧 -MDN"></a>知道了 jQuery 是怎么实现的，现在去看看真正的 jQuery吧 -<a href="https://jquery.com/" target="_blank" rel="noopener">MDN</a></h1><ul>
<li><a href="http://api.jquery.com/" target="_blank" rel="noopener">jQuery Api</a></li>
<li><a href="https://www.jquery123.com/" target="_blank" rel="noopener">jQuery Api中文网</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li class=&apos;red&apos;&gt;选项1&lt;/li&gt;</span><br><span class="line">  &lt;li class=&apos;red&apos;&gt;选项2&lt;/li&gt;</span><br><span class="line">  &lt;li class=&apos;red&apos;&gt;选项3&lt;/li&gt;</span><br><span class="line">  &lt;li class=&apos;red&apos;&gt;选项4&lt;/li&gt;</span><br><span class="line">  &lt;li class=&apos;red&apos;&gt;选项5&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;button id=x&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// css</span><br><span class="line">.red&#123;color:red;&#125;</span><br><span class="line">.green&#123;color:green;&#125;</span><br><span class="line"></span><br><span class="line">// js,使用 jQuery</span><br><span class="line">var nodes = jQuery(&apos;ul&gt;li&apos;)</span><br><span class="line">var classes = [&apos;red&apos;,&apos;green&apos;,&apos;blue&apos;,&apos;yellow&apos;,&apos;black&apos;]</span><br><span class="line">x.onclick = function()&#123;</span><br><span class="line">  /* 常规写法</span><br><span class="line">  nodes.removeClass(&apos;red&apos;)</span><br><span class="line">  nodes.addClass(&apos;green&apos;)</span><br><span class="line">  */</span><br><span class="line">  nodes.removeClass(&apos;red&apos;).addClass(&apos;green&apos;) // 链式操作</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>现在大概已经知道 jQuery 是怎么写的了，明白了它的原理，接下来只需要多了解它的api，<br>但实际上 jQuery 并没有这么简单，作为曾经风靡前端的库，它的强大超乎我们的想象。</p>
<ul>
<li>jQuery 在兼容性方面做得很好，1.7 版本兼容到 IE 6</li>
<li>jQuery 还有动画、AJAX 等模块，不止 DOM 操作</li>
<li>jQuery 的功能更丰富</li>
<li>jQuery 使用了 prototype，我们没有使用，等学了 new 之后再用 </li>
</ul>
<p><strong>库是特定种类的API</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/25/A27-DOM-API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/25/A27-DOM-API/" itemprop="url">A27-DOM API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-25T22:23:28+08:00">
                2018-01-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model" target="_blank" rel="noopener">MDN</a></li>
<li><a href="http://javascript.ruanyifeng.com/dom/node.html" target="_blank" rel="noopener">阮一峰</a><br>什么是DOM，DOM最重要的就是要明白它的概念，否则遇到问题也不知道如何下手<br>大家都说DOM树，这是一个比喻，易于理解，<br>D就是文档，想象它是一个树状的结构（就像之前数据结构里的二叉树那样），树上有着节点（node）<br>O就是对象，<br>M也就是模型，把D和O做一个一一对应的映射，就是这个模型<br>所以DOM就是把文档变成一个对象<br><img src="http://upload-images.jianshu.io/upload_images/9047034-b2ba8fd51edc6b54.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="映射"><br><strong>上图红字</strong><br>DOM转化来的js对象里面到底存放什么由DOM标准规定<br>比如：<br>上图的 head、body、meta、link、h1、p 都是Element的实例<br>（中间存在其它函数，F12调试可见，比如document.body就是document.body.<strong>proto</strong>-&gt;HTMLBodyElement.prototype.<strong>proto</strong>-&gt;HTMLElement.prototype.<strong>proto</strong>-&gt;Element.prototype）<br>根节点html比较特殊，是由document构造的（DOucment-&gt;HTMLDocument,简写）<br>至于文本节点则是由</li>
</ul>
<h2 id="Node-Api"><a href="#Node-Api" class="headerlink" title="Node Api"></a>Node Api</h2><h3 id="Node-属性"><a href="#Node-属性" class="headerlink" title="Node 属性"></a>Node 属性</h3><p>记住以下单词；</p>
<ul>
<li>child / children / parent</li>
<li>node </li>
<li>first / last</li>
<li>next / previous</li>
<li>sibling / siblings</li>
<li>type</li>
<li>value / text / content</li>
<li>inner / outer</li>
<li>element<br>然后相互组合<br>一部分：childNodes,firstChild,innerText,lastChild,nextSibling,nodeName,nodeType,nodeValue,outerText,ownerDocument,parentElement,parentNode,previousSibling,textContent<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;&lt;/head&gt;</span><br><span class="line">  &lt;body&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">document.body.previousSibling // #text</span><br><span class="line">document.body.previousSibling.previousSibling // &lt;head&gt;&lt;/head&gt;</span><br><span class="line">docuemnt.body.previousElementSibling // &lt;head&gt;&lt;/head&gt;</span><br><span class="line">// 为什么previousSibling返回的是文本节点呢，这是因为本来dom是配对xml的，后来强行配对html</span><br><span class="line">// previousSibling是 Node 的属性，previousElementSibling是 Element 的属性</span><br><span class="line">// previousSibling 是本来就有的，previousElementSibling是后来加的</span><br><span class="line">// 类似的还有 nextSibling / nextElementSibling, firstChild / firstElementChild 等等</span><br><span class="line">// 可以在F12中尝试，控制台会显示提示以及该属性属于哪个对象</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="几个要注意的-Node-Api"><a href="#几个要注意的-Node-Api" class="headerlink" title="几个要注意的 Node Api"></a>几个要注意的 Node Api</h3><ul>
<li><code>nodeName</code><br>注意这个api很奇葩<br><code>document.body.nodeName // &#39;BODY</code><br><code>document.documentElement.nodeName // &#39;HTML</code><br><code>document.nodeName不行，必须像上面那样写</code><br>它对所有标签返回名称都是大写<br><strong>但是！唯有svg，它返回小写</strong><br><code>document.getElementsByTagName(&#39;svg&#39;)[0] // &#39;svg&#39;</code><br>这是因为svg是‘外来的’标签，它是后来新加的，然后就这么小写了……</li>
<li><p><code>nodeType</code> -<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType" target="_blank" rel="noopener">MDN</a><br>只读属性 Node.nodeType 表示的是该节点的类型。其所有可能的值请参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType#%E8%8A%82%E7%82%B9%E7%B1%BB%E5%9E%8B%E5%B8%B8%E9%87%8F" target="_blank" rel="noopener">节点类型常量.</a><br>它返回一个整数来表示节点的类型<br>(之所以这样是因为当年的计算机还没这么发达，而1比element的字节小多了)<br>以下几个需知：<br>1  元素节点， Eg：<code>&lt;div&gt;、&lt;p&gt;</code><br>3  文本节点， 元素或者属性中实际的文字，比如<code>&lt;p&gt;段落&lt;/p&gt;</code>中的段落二字<br>9  Document节点，<br>11 DocumentFragment节点 // 很特殊的一个节点（暂时我还不清楚，google DocumentFragment优化）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.body.nodeType // 1</span><br><span class="line">document.nodeType // 9</span><br><span class="line">document.documentElement.nodetype // 1</span><br><span class="line">document.documentElement.nodeName // &apos;HTML&apos;</span><br><span class="line">// 所以document.documentElement才是html，document不是？</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>innerText</code>与<code>textContent</code> -<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent" target="_blank" rel="noopener">MDN</a><br>区别:</p>
<ul>
<li>textContent 会获取所有元素的内容，包括 <code>&lt;script&gt; 和 &lt;style&gt;</code> 元素，然而 innerText 不会。</li>
<li>innerText意识到样式，并且不会返回隐藏元素的文本(设置display:none的元素)，而textContent会。</li>
<li>由于 innerText 受 CSS 样式的影响，它会触发重排（reflow），但textContent 不会。</li>
<li>与 textContent 不同的是, 在 Internet Explorer (对于小于等于 IE11 的版本) 中对 innerText 进行修改， 不仅会移除当前元素的子节点，而且还会永久性地破坏所有后代文本节点（所以不可能再次将节点再次插入到任何其他元素或同一元素中）。</li>
</ul>
</li>
<li><p><code>childNodes</code> -<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList#A_sometimes-live_collection" target="_blank" rel="noopener">MDN</a><br>Node.childNodes 返回包含指定节点的子节点的集合，该集合为即时更新的集合（live collection）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var parent = document.getElementById(&apos;parent&apos;);</span><br><span class="line">parent.childNodes.length // 2</span><br><span class="line">parent.appendChild(document.createElement(&apos;div&apos;));</span><br><span class="line">parent.childNodes.length // 请问现在 length 是多少</span><br><span class="line"></span><br><span class="line">// 3</span><br><span class="line"></span><br><span class="line">// 与之相反的是 querySelectorAll() ,它返回的是一个静态的 NodeList</span><br><span class="line">var allDiv = document.querySelectorAll(&apos;div&gt;</span><br><span class="line">allDiv.length // 假设是 2</span><br><span class="line">document.body.appendChild(  document.createElement(&apos;div&apos;)  )</span><br><span class="line">allDiv.length // 请问现在 length 的值是多少？？？</span><br><span class="line">// 2</span><br><span class="line">// querySelectorAll方法不属于 node，是document 和 element 的</span><br></pre></td></tr></table></figure>
</li>
<li><p>HTMLCollection与NodeList的区别有</p>
<ul>
<li>HTMLCollection实例对象的成员只能是Element节点，NodeList实例对象的成员可以包含其他节点。</li>
<li>HTMLCollection实例对象可以用id属性或name属性引用节点元素，NodeList只能使用数字索引引用。</li>
<li>HTML DOM 中的 HTMLCollection 是即时更新的（live）；<br>当其所包含的文档结构发生改变时，它会自动更新。<br>NodeList 对象大多数情况下是个实时集合。<br>意思是说，如果文档中的节点树发生变化，则已经存在的 NodeList 对象也可能会变化。例如，Node.childNodes 是实时的。<br>在另一些情况下，NodeList 是一个静态集合，也就意味着随后对文档对象模型的任何改动都不会影响集合的内容。document.querySelectorAll 返回一个静态的 NodeList。<h3 id="Node-方法-（如果一个属性是函数，那么这个属性就也叫做方法；换言之，方法是函数属性）"><a href="#Node-方法-（如果一个属性是函数，那么这个属性就也叫做方法；换言之，方法是函数属性）" class="headerlink" title="Node 方法 （如果一个属性是函数，那么这个属性就也叫做方法；换言之，方法是函数属性）"></a>Node 方法 （如果一个属性是函数，那么这个属性就也叫做方法；换言之，方法是函数属性）</h3></li>
</ul>
</li>
<li><code>appendChild()</code></li>
<li><code>cloneNode() // 分深、浅拷贝</code></li>
<li><code>contains()</code></li>
<li><code>hasChildNodes()</code></li>
<li><code>insertBefore()</code></li>
<li><code>isEqualNode() // 看起来相等</code></li>
<li><code>isSameNode() // 完全相等，可以用 === 来代替</code></li>
<li><code>removeChild()</code></li>
<li><code>replaceChild()</code></li>
<li><code>normalize() // 常规化</code><br>基本看见名字就知道作用，不清楚也可以查MDN。</li>
</ul>
<h2 id="Document-Api-MDN"><a href="#Document-Api-MDN" class="headerlink" title="Document Api -MDN"></a>Document Api -<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document" target="_blank" rel="noopener">MDN</a></h2><h3 id="Document-属性"><a href="#Document-属性" class="headerlink" title="Document 属性"></a>Document 属性</h3><ul>
<li>body</li>
<li>characterSet</li>
<li>childElementCount</li>
<li>children</li>
<li>doctype</li>
<li>documentElement</li>
<li>domain</li>
<li>fullscreen</li>
<li>head</li>
<li>hidden</li>
<li>images</li>
<li>links</li>
<li>location</li>
<li>onxxxxxxxxx</li>
<li>origin</li>
<li>plugins</li>
<li>readyState</li>
<li>referrer</li>
<li>scripts</li>
<li>scrollingElement</li>
<li>styleSheets</li>
<li>title</li>
<li>visibilityState<h3 id="Document-方法："><a href="#Document-方法：" class="headerlink" title="Document 方法："></a>Document 方法：</h3></li>
<li>close()</li>
<li>createDocumentFragment()</li>
<li>createElement()</li>
<li>createTextNode()</li>
<li>execCommand()</li>
<li>exitFullscreen()</li>
<li>getElementById()</li>
<li>getElementsByClassName()</li>
<li>getElementsByName()</li>
<li>getElementsByTagName()</li>
<li>getSelection()</li>
<li>hasFocus()</li>
<li>open()</li>
<li>querySelector()</li>
<li>querySelectorAll()</li>
<li>registerElement()</li>
<li>write()</li>
<li>writeln()</li>
</ul>
<h2 id="Element-Api-MDN"><a href="#Element-Api-MDN" class="headerlink" title="Element Api -MDN"></a>Element Api -<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element" target="_blank" rel="noopener">MDN</a></h2><p>关于 DOM API 更多见之后写的常用 API。（待续）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/24/A26-JS函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/24/A26-JS函数/" itemprop="url">A26-JS函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-24T23:34:02+08:00">
                2018-01-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Function-MDN"><a href="#Function-MDN" class="headerlink" title="Function -MDN"></a>Function -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener">MDN</a></h2>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var f = function(a,b)&#123;</span><br><span class="line">  return a+b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  语法：<code>new Function ([arg1[, arg2[, ...argN]],] functionBody)</code><br>  参数：<br>  <code>arg1, arg2, ... argN</code><br>  被函数使用的参数的名称必须是合法命名的。参数名称是一个有效的JavaScript标识符的字符串，或者一个用逗号分隔的有效字符串的列表;例如“×”，“theValue”，或“A，B”。<br>  <code>functionBody</code><br>  一个含有包括函数定义的JavaScript语句的字符串</p>
<p>  函数总是会返回一个值<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function fn()&#123;</span><br><span class="line">  console.log(&apos;函数&apos;)</span><br><span class="line">  return undefined // 如果你不写就会自动添加这样的一句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="函数的5种声明方式"><a href="#函数的5种声明方式" class="headerlink" title="函数的5种声明方式"></a>函数的5种声明方式</h2><p>function 有一个属性：<code>name</code></p>
<ol>
<li><p>具名函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function f(x,y)&#123;</span><br><span class="line">  console.log(x+y) // 打印什么和返回什么没有必然联系</span><br><span class="line">  return undefined // 必须有一个return，没有的话也会被自动添加本句</span><br><span class="line">&#125;</span><br><span class="line">f.name // &apos;f&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名函数<br>它不能单独使用，可以赋给一个变量来使用<a href="https://developer.mozilla.org/zh-CN/docs/web/JavaScript/Reference/Operators/function" target="_blank" rel="noopener">函数表达式</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var f</span><br><span class="line">f = function(x,y)&#123;</span><br><span class="line">    return x+y</span><br><span class="line">&#125;</span><br><span class="line">f.name // &apos;f&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>具名函数赋值 -<a href="http://javascript.ruanyifeng.com/grammar/function.html#toc1" target="_blank" rel="noopener">阮一峰</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function f()&#123;&#125;</span><br><span class="line">f.name // &apos;f&apos;</span><br><span class="line">console.log(f) // &apos;function f()&#123;&#125;&apos;</span><br><span class="line"></span><br><span class="line">var f2 = function fn()&#123;&#125;</span><br><span class="line">f2.name // &apos;fn&apos;</span><br><span class="line">console.log(fn) // Uncaught ReferenceError: fn is not defined</span><br><span class="line">// 只能在 function fn()&#123;&#125;这个函数里面访问到fn，在外面无效</span><br><span class="line">// js 的不一致性</span><br></pre></td></tr></table></figure>
</li>
<li><p>window.Function 函数对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var f = new FUnction(&apos;x&apos;, &apos;y&apos;, &apos;return x+y&apos;)</span><br><span class="line">f.name // &apos;anonymous&apos;</span><br><span class="line"></span><br><span class="line">var n=1</span><br><span class="line">var fn = new Function(&apos;x&apos;, &apos;y&apos;, &apos;return x+&apos; + n + &apos;+y&apos; ) </span><br><span class="line">console.log(fn) // f anonymous(x,y)&#123; return x+1+y &#125;</span><br><span class="line">fn(1,2) // 4</span><br></pre></td></tr></table></figure>
</li>
<li><p>箭头函数 -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener">MDN</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var f = (x,y) =&gt; &#123;return x+y&#125;</span><br><span class="line">f.name // &apos;f&apos;</span><br><span class="line"></span><br><span class="line">var f2 = (x,y) =&gt; x+y // 只有一句 return 的时候，可以将 return 和 &#123;&#125; 省略</span><br><span class="line">var f3 = n =&gt; n*n // 如果参数只有一个，() 可以省略</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="函数的本质"><a href="#函数的本质" class="headerlink" title="函数的本质"></a>函数的本质</h2><p>函数是一段可以反复调用的代码块。<br>函数还能接受输入的参数，不同的参数会返回不同的值。<br>函数和数据不同，不能直接使用，只能调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 定义一个 n</span><br><span class="line">var n=2</span><br><span class="line">// 然后直接使用它就好了</span><br><span class="line">var m = n // 比如将它赋值给 m</span><br><span class="line">console.log(n) // 或者打印出来</span><br><span class="line"></span><br><span class="line">// 定义一个函数</span><br><span class="line">function f(x,y)&#123;</span><br><span class="line">  return x+y</span><br><span class="line">&#125;</span><br><span class="line">f  // 打印出 f 函数，等于啥也没做，return x+y 并没有执行</span><br><span class="line">// 函数只能调用（call）</span><br><span class="line">f(1,2) // 3</span><br></pre></td></tr></table></figure></p>
<h3 id="函数是怎样储存的"><a href="#函数是怎样储存的" class="headerlink" title="函数是怎样储存的"></a>函数是怎样储存的</h3><p><img src="http://upload-images.jianshu.io/upload_images/9047034-ee70f4d296ed3fca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>函数也是对象的一种，在stack中储存地址，在heap中储存对象，保存的是字符串（就是你定义的函数，参数、函数体等），通过Function.prototype里的call()来调用函数体<br>我们来试着用对象来做一个这样的函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var f = &#123;&#125;</span><br><span class="line">f.name = &apos;f&apos; // 函数本身就有的属性</span><br><span class="line">f.params = [&apos;x&apos;,&apos;y&apos;]  // 模拟参数</span><br><span class="line">f.functionBody = &apos;console.log(1)&apos;  // 模拟函数体，不管参数还是函数体，都是字符串形式</span><br><span class="line">f.call = function()&#123;</span><br><span class="line">  return window.eval(f.functionBody)</span><br><span class="line">&#125;</span><br><span class="line">f.call() </span><br><span class="line">// 1</span><br><span class="line">// undefined， console.log()的返回值</span><br><span class="line">// 这就是为什么说函数是对象，函数调用实际上就是eval()函数的函数体的过程</span><br><span class="line">// f与f.call()区别：f是变量，是函数（这里用的是对象），f.call()是调用函数</span><br></pre></td></tr></table></figure></p>
<p><strong>所以函数就是可以执行代码的对象</strong><br>eval() -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval" target="_blank" rel="noopener">MDN</a><br>eval()函数会将传入的字符串当做JavaScript代码进行执行。</p>
<h3 id="f-1-2-与-f-call-undefined-1-2"><a href="#f-1-2-与-f-call-undefined-1-2" class="headerlink" title="f(1,2) 与 f.call(undefined, 1, 2)"></a>f(1,2) 与 f.call(undefined, 1, 2)</h3><p><img src="http://upload-images.jianshu.io/upload_images/9047034-9bdd51ac634c5f4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>前者是语法糖，后者才是真正的写法<br>理解这两者的区别才能更好的理解this<br><a href="https://segmentfault.com/a/1190000011819236" target="_blank" rel="noopener">SegmentFault</a></p>
<h3 id="call-怎么用-MDN"><a href="#call-怎么用-MDN" class="headerlink" title="call()怎么用 -MDN"></a>call()怎么用 -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener">MDN</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function f(x,y)&#123; return x+y &#125;</span><br><span class="line">f.call(undefined, 1, 2) // 3</span><br></pre></td></tr></table></figure>
<p>call() 方法调用一个函数, 其具有一个指定的this值和分别地提供的参数(参数的列表)。<br>语法：<code>fun.call(thisArg, arg1, arg2, ...)</code><br>参数：<br>thisArg<br>在fun函数运行时指定的this值。需要注意的是，指定的this值并不一定是该函数执行时真正的this值，<br>如果这个函数处于<strong>非严格模式</strong>下，则指定为null和undefined的this值会自动指向全局对象(浏览器中就是window对象)，<br>同时值为原始值(数字，字符串，布尔值)的this会指向该原始值的自动包装对象。<br>在严格模式下，this将保持他进入执行上下文时的值，所以下面的this将会默认为undefined。(详见this-mdn)<br>arg1, arg2, …<br>指定的参数列表。<br>返回值：返回值是你调用的方法的返回值，若该方法没有返回值，则返回undefined。<br>描述：<br>可以让call()中的对象调用当前对象所拥有的function。<br>你可以使用call()来实现继承： 写一个方法，然后让另外一个新的对象来继承它（而不是在新对象中再写一次这个方法）。</p>
<h3 id="this-MDN-阮一峰-与-arguments-MDN"><a href="#this-MDN-阮一峰-与-arguments-MDN" class="headerlink" title="this -MDN-阮一峰 与 arguments MDN"></a>this -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener">MDN</a>-<a href="http://javascript.ruanyifeng.com/oop/this.html" target="_blank" rel="noopener">阮一峰</a> 与 arguments <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="noopener">MDN</a></h3><p>什么是this，在以下代码中<br><code>f.call(undefined, 1, 2)</code><br><code>undefined</code>就是<code>this</code><br><code>1</code>和<code>2</code>就是<code>arguments</code><br><code>arguments</code>是伪数组别忘了<br>或者说：<br>call的第一个参数可以用this得到<br>call的后面所有参数可以用arguments得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// Eg</span><br><span class="line">var f = function()&#123;</span><br><span class="line">  console.log(this)</span><br><span class="line">  console.log(this === window)</span><br><span class="line">  console.log(arguments)</span><br><span class="line">&#125;</span><br><span class="line">f.call(undefined, 1,2,3)</span><br><span class="line">// log this -&gt; window 对象 原因见上文-call()怎么用</span><br><span class="line">// true</span><br><span class="line">// log arguments -&gt; [1,2,3] 还有一些属性api见mdn</span><br><span class="line"></span><br><span class="line">var f2 = function()&#123;</span><br><span class="line">  &apos;use strict&apos;  // use 严格模式</span><br><span class="line">  console.log(this)</span><br><span class="line">  console.log(this === window)</span><br><span class="line">  console.log(arguments)</span><br><span class="line">&#125;</span><br><span class="line">f2.call(undefined)</span><br><span class="line">// undefined</span><br><span class="line">// false</span><br><span class="line">// []</span><br><span class="line"></span><br><span class="line">f2.call(7)</span><br><span class="line">// 7 false []</span><br><span class="line"> f2.call(&apos;foo&apos;)</span><br><span class="line"> // &apos;foo&apos; false []</span><br><span class="line"></span><br><span class="line">var f3 =  function() &#123;</span><br><span class="line">  console.log(Object.prototype.toString.call(this));</span><br><span class="line">&#125;</span><br><span class="line">//原始值 1 被隐式转换为对象</span><br><span class="line">f3.call(1); // [object Number]</span><br></pre></td></tr></table></figure></p>
<p><strong>注意:</strong> 使用 call 和 apply 函数的时候，如果传递的 this 值不是一个对象，JavaScript 将尝试使用内部 ToObject 操作将其转换为对象。因此，如果传递的值是一个原始值比如 7 或 ‘foo’，那么就会使用相关构造函数将它转换为对象，所以原始值 7 通过new Number(7)被转换为对象，而字符串’foo’使用 new String(‘foo’) 转化为对象。（这一点上文也有描述）<br>this 也是为了长得像 java 而诞生的，和 new 一样</p>
<h2 id="call-stack-调用栈"><a href="#call-stack-调用栈" class="headerlink" title="call stack 调用栈"></a>call stack 调用栈</h2><p>表示函数或子例程像堆积木一样存放，以实现层层调用。<br>别忘了栈是先入后出。<br><img src="http://upload-images.jianshu.io/upload_images/9047034-85dfa91ff6fc6193.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="嵌套调用"></p>
<ul>
<li><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gYSgpewogICAgY29uc29sZS5sb2coJ2EnKQogIHJldHVybiAnYScgIAp9CgpmdW5jdGlvbiBiKCl7CiAgICBjb25zb2xlLmxvZygnYicpCiAgICByZXR1cm4gJ2InCn0KCmZ1bmN0aW9uIGMoKXsKICAgIGNvbnNvbGUubG9nKCdjJykKICAgIHJldHVybiAnYycKfQoKYS5jYWxsKCkKYi5jYWxsKCkKYy5jYWxsKCk%3D!!!" target="_blank" rel="noopener">普通调用</a></li>
<li><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gYSgpewogICAgY29uc29sZS5sb2coJ2ExJykKICAgIGIuY2FsbCgpCiAgICBjb25zb2xlLmxvZygnYTInKQogIHJldHVybiAnYScgIAp9CmZ1bmN0aW9uIGIoKXsKICAgIGNvbnNvbGUubG9nKCdiMScpCiAgICBjLmNhbGwoKQogICAgY29uc29sZS5sb2coJ2IyJykKICAgIHJldHVybiAnYicKfQpmdW5jdGlvbiBjKCl7CiAgICBjb25zb2xlLmxvZygnYycpCiAgICByZXR1cm4gJ2MnCn0KYS5jYWxsKCkKY29uc29sZS5sb2coJ2VuZCcp!!!" target="_blank" rel="noopener">嵌套调用</a></li>
<li><p><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gc3VtKG4pewogICAgaWYobj09MSl7CiAgICAgICAgcmV0dXJuIDEKICAgIH1lbHNlewogICAgICAgIHJldHVybiBuICsgc3VtLmNhbGwodW5kZWZpbmVkLCBuLTEpCiAgICB9Cn0KCnN1bS5jYWxsKHVuZGVmaW5lZCw1KQ%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D" target="_blank" rel="noopener">递归调用</a><br>stack overflow 栈溢出<br>call stack 超过电脑分配空间就会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function sum(n)&#123;</span><br><span class="line">    if(n==1)&#123;</span><br><span class="line">        return 1</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return n + sum.call(undefined, n-1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum.call(undefined,5) //15</span><br><span class="line"></span><br><span class="line">sum.call(undefined, 100000)</span><br><span class="line">// Uncaught RangeError: Maximum call stack size exceeded</span><br><span class="line">// 最大调用栈大小超过</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Call_stack" target="_blank" rel="noopener">call stack-mdn</a></p>
</li>
<li><a href="http://www.ruanyifeng.com/blog/2013/11/stack.html" target="_blank" rel="noopener">call stack-阮一峰</a></li>
<li><a href="https://www.wikiwand.com/zh-hans/%E5%A0%86%E7%96%8A%E6%BA%A2%E4%BD%8D" target="_blank" rel="noopener">stack overflow-wiki</a></li>
<li><a href="https://stackoverflow.com/" target="_blank" rel="noopener">stackoverflow.com</a>捏他的同名程序问答网站</li>
<li><a href="https://segmentfault.com/" target="_blank" rel="noopener">国内版stackoverflow-&gt;SegmentFault</a></li>
</ul>
<h2 id="作用域-MDN-阮一峰"><a href="#作用域-MDN-阮一峰" class="headerlink" title="作用域 -MDN-阮一峰"></a>作用域 -<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Scope" target="_blank" rel="noopener">MDN</a>-<a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="noopener">阮一峰</a></h2><ul>
<li>按照语法树，就近原则</li>
<li>我们只能确定变量是哪个变量，但是不能确定变量的值<h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3>拿到代码直接做——必然会错。请先提升声明<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// 1.</span><br><span class="line">var a = 1</span><br><span class="line">function f1()&#123;</span><br><span class="line">    alert(a) // 是多少</span><br><span class="line">    var a = 2</span><br><span class="line">&#125;</span><br><span class="line">f1.call() // undefined</span><br><span class="line"></span><br><span class="line">// 2.</span><br><span class="line">var a = 1</span><br><span class="line">function f1()&#123;</span><br><span class="line">    var a = 2</span><br><span class="line">    f2.call()</span><br><span class="line">&#125;</span><br><span class="line">function f2()&#123;</span><br><span class="line">    console.log(a) // 是多少</span><br><span class="line">&#125;</span><br><span class="line">f1.call() // 1</span><br><span class="line"></span><br><span class="line">// 3.</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;li&gt;5&lt;/li&gt; &lt;li&gt;6&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">var liTags = document.querySelectorAll(&apos;li&apos;)</span><br><span class="line">for(var i = 0; i &lt; liTags.length; i++)&#123;</span><br><span class="line">    liTags[i].onclick = function()&#123;</span><br><span class="line">        console.log(i) // 点击第3个 li 时，打印 2 还是打印 6？</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 打印 6</span><br><span class="line">// 当你点击时for早就遍历完，i 已经自增到 6</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="闭包-MDN-方应杭"><a href="#闭包-MDN-方应杭" class="headerlink" title="闭包 -MDN-方应杭"></a>闭包 -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures" target="_blank" rel="noopener">MDN</a>-<a href="https://zhuanlan.zhihu.com/p/22486908" target="_blank" rel="noopener">方应杭</a></h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/20/A25-JS数组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zerolhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerolhao-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/20/A25-JS数组/" itemprop="url">A25-JS数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-20T23:34:15+08:00">
                2018-01-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jirengu/" itemprop="url" rel="index">
                    <span itemprop="name">饥人谷</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h2 id="Array-MDN"><a href="#Array-MDN" class="headerlink" title="Array -MDN"></a><code>Array</code> -<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">MDN</a></h2><p>window.Array 全局对象（也是函数）</p>
<ul>
<li><p>基本用法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var a = Array(3)  // &#123;length: 3&#125;</span><br><span class="line">a.length // 3</span><br><span class="line">0 in a // false, 数组 a 里面并没有 0 这个 key</span><br><span class="line">a[0] // undefined</span><br><span class="line">a.push(&apos;three&apos;)</span><br><span class="line">3 in a // true</span><br><span class="line">a[3] // &apos;three&apos;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/9047034-b91253072572d58b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a2 = Array(3,3) // [3,3]</span><br><span class="line">a2.length // 2</span><br><span class="line">0 in a2 // true</span><br><span class="line">a2[0] // 3 </span><br><span class="line">// 当括号里只有一个数字参数的时候，它是长度，当参数不止一个的时候它是参数</span><br><span class="line">// 这叫做不一致性，这不是一件好事</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/9047034-c979044ed221b927.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new Array(3) 跟不加 new 一样的效果</span><br><span class="line">new Array(3,3,) 跟不加 new 一样的效果</span><br><span class="line">  </span><br><span class="line">var a = [1,2,3] // 常用简写方式</span><br></pre></td></tr></table></figure>
</li>
<li><p>加不加<code>new</code>对不同类型的区别：</p>
<ul>
<li><code>String、Number、Boolean</code><br><code>String()</code>返回基本类型<br><code>new String()</code>返回对象</li>
<li><code>Object、Array、Function</code><br><code>Object()</code>返回对象<br><code>new Object()</code>返回依然是对象</li>
</ul>
</li>
<li>数组为什么是数组而不是对象是因为数组有着对象没有的特点<br>也就是你的对象的<code>__proto__</code>指向的是否是<code>Array.prototype</code><br><img src="http://upload-images.jianshu.io/upload_images/9047034-3f3ffb2c07e02a89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><p>数组的一个特征<br>数组之所以是数组，其实是因为你把它数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var a = [1,2,3]</span><br><span class="line">a.x = &apos;x&apos;</span><br><span class="line">a.y = &apos;y&apos;</span><br><span class="line">for(let i=0; i &lt; a.length; i++)&#123; // 这种方法遍历排除了 x、y</span><br><span class="line">  console.log(a[i]) // 1, 2, 3</span><br><span class="line">&#125;</span><br><span class="line">for(let key in a)&#123;</span><br><span class="line">  console.log(key) // 0, 1, 2, x, y</span><br><span class="line">&#125;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  0: 1, 1: 2, 2: 3, length: 3</span><br><span class="line">&#125;</span><br><span class="line">for(let i=0; i &lt; obj.length; i++)&#123;</span><br><span class="line">  console.log(obj[i]) // 1, 2, 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>伪数组<br>上面的<code>obj</code>对象就是伪数组；它不关心你有没有数组的那些方法，只需要012345……这些下标去遍历<br>只要你的原型链中没有<code>Array.prototype</code>就是伪数组<br>目前JS中只有一种伪数组，就是<code>arguments</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  function f()&#123; console.dir(arguments) &#125;</span><br><span class="line">  f(1,2,3)</span><br><span class="line">  ```   </span><br><span class="line">  从下图可以看见它引用的是`Object.protype`而非`Array.prototype`</span><br><span class="line">  ![](http://upload-images.jianshu.io/upload_images/9047034-54e385e6ddc2d1bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">- `forEach`API -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)[阮一峰](http://javascript.ruanyifeng.com/stdlib/array.html#toc15)</span><br><span class="line">  forEach() 方法对数组的每个元素执行一次提供的函数。</span><br><span class="line">  语法：</span><br></pre></td></tr></table></figure>
<p>array.forEach(callback(currentValue, index, array){</p>
<pre><code>//do something
</code></pre><p>}, this)</p>
<p>array.forEach(callback[, thisArg])</p>
<p>// Eg<br>const arr = [‘a’, ‘b’, ‘c’];</p>
<p>arr.forEach(function(element) {</p>
<pre><code>console.log(element);
</code></pre><p>});<br>arr.forEach( element =&gt; console.log(element));<br>// a<br>// b<br>// c</p>
<p>// 上面我们并没有将arr传进forEach里面但是为什么还能调用<br>// 可以这么理解<br>// 用this来获取，比如<br>var obj = { 0:’a’, 1:’b’, length:2 }<br>obj.forEach = function(fn){<br>  for(let i=0; i &lt; this.length; i++){</p>
<pre><code>fn(this[i], i, this)
</code></pre><p>  }<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  参数：</span><br><span class="line">  `callback`</span><br><span class="line">  为数组中每个元素执行的函数，该函数接收三个参数：</span><br><span class="line">  `currentValue`(当前值)</span><br><span class="line">  数组中正在处理的当前元素。</span><br><span class="line">  `index`(索引)</span><br><span class="line">  数组中正在处理的当前元素的索引。</span><br><span class="line">  `array`</span><br><span class="line">  `forEach()`方法正在操作的数组。</span><br><span class="line">  `thisArg`可选</span><br><span class="line">  可选参数。当执行回调 函数时用作this的值(参考对象)。</span><br><span class="line">  返回值：`undefined`.</span><br><span class="line">- `sort()` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)[阮一峰](http://javascript.ruanyifeng.com/stdlib/array.html#toc13)</span><br><span class="line">  sort方法对数组成员进行排序，默认排序顺序是根据字符串Unicode码点。 sort 排序不一定是稳定的排序后，原数组将被改变。</span><br></pre></td></tr></table></figure>
<p>[‘d’, ‘c’, ‘b’, ‘a’].sort()<br>// [‘a’, ‘b’, ‘c’, ‘d’]</p>
<p>[4, 3, 2, 1].sort()<br>// [1, 2, 3, 4]</p>
<p>var fruit = [‘cherries’, ‘apples’, ‘bananas’];<br>fruit.sort();<br>// [‘apples’, ‘bananas’, ‘cherries’]</p>
<p>var scores = [1, 10, 21, 2];<br>scores.sort();<br>// [1, 10, 2, 21]<br>// 注意10在2之前,<br>// 因为在 Unicode 指针顺序中”10”在”2”之前</p>
<p>var things = [‘word’, ‘Word’, ‘1 Word’, ‘2 Words’];<br>things.sort();<br>// [‘1 Word’, ‘2 Words’, ‘Word’, ‘word’]<br>// 在Unicode中, 数字在大写字母之前,<br>// 大写字母在小写字母之前.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">`arr.sort()`    </span><br><span class="line">`arr.sort(compareFunction)`</span><br><span class="line">参数:</span><br><span class="line">`compareFunction`</span><br><span class="line">可选。用来指定按某种顺序进行排列的函数。如果省略，元素按照转换为的字符串的各个字符的Unicode位点进行排序。</span><br><span class="line">返回值: 返回排序后的数组。原数组已经被排序后的数组代替。</span><br><span class="line">描述：</span><br><span class="line">如果没有指明 `compareFunction` ，那么元素会按照转换为的字符串的诸个字符的 Unicode 位点进行排序。例如 &quot;Banana&quot; 会被排列到 &quot;cherry&quot; 之前。当数字按由小到大排序时，9 出现在 80 之前，但因为（没有指明 `compareFunction`），比较的数字会先被转换为字符串，所以在Unicode顺序上 &quot;80&quot; 要比 &quot;9&quot; 要靠前。</span><br><span class="line">如果指明了 `compareFunction` ，那么数组会按照调用该函数的返回值排序。即 a 和 b 是两个将要被比较的元素：</span><br><span class="line">  + 如果 `compareFunction(a, b)` 小于 0 ，那么 a 会被排列到 b 之前；</span><br><span class="line">  + 如果 `compareFunction(a, b)` 大于 0 ， b 会被排列到 a 之前</span><br><span class="line">  + 如果 `compareFunction(a, b)` 等于 0 ， a 和 b 的相对位置不变</span><br><span class="line">  + `compareFunction(a, b)` 必须总是对相同的输入返回相同的比较结果，否则排序的结果将是不确定的。</span><br></pre></td></tr></table></figure>
<p>// 对数字排序<br>var a = [5,6,4,1,2,3]<br>// 升序<br>function up(a, b) {<br>  if (a &lt; b ) {           // 按某种排序标准进行比较, a 小于 b</p>
<pre><code>return -1;
</code></pre><p>  }<br>  if (a &gt; b ) {</p>
<pre><code>return 1;
</code></pre><p>  }<br>  // a must be equal to b<br>  return 0;<br>}<br>// 更简洁的写法<br>function up(a,b){<br>  return a-b<br>}<br>a.sort(up) // 1,2,3,4,5,6</p>
<p>// 降序<br>function down(a,b){<br>  return b-a<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  js内置的排序一般都是快排</span><br><span class="line">- `join()` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/join)</span><br><span class="line">  join() 方法将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串。</span><br><span class="line">  和sort()方法不同，它不会改变原有的数组</span><br><span class="line">  语法:</span><br></pre></td></tr></table></figure>
<p>str = arr.join()<br>// 默认为 “,”</p>
<p>str = arr.join(“”)<br>// 分隔符 === 空字符串 “”</p>
<p>str = arr.join(separator)<br>// 分隔符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">参数:</span><br><span class="line">`separator`</span><br><span class="line">指定一个字符串来分隔数组的每个元素。</span><br><span class="line">如果需要(`separator`)，将分隔符转换为字符串。</span><br><span class="line">如果省略()，数组元素用逗号分隔。默认为 &quot;,&quot;。</span><br><span class="line">如果separator是空字符串(&quot;&quot;)，则所有元素之间都没有任何字符。</span><br><span class="line">返回值</span><br><span class="line">一个所有数组元素连接的字符串。如果 arr.length 为0，则返回空字符串</span><br></pre></td></tr></table></figure>
<p>// Eg<br>let a = [‘Wind’, ‘Rain’, ‘Fire’];</p>
<p>console.log(a.join());<br>// 默认为 “,”<br>// ‘Wind,Rain,Fire’</p>
<p>console.log(a.join(“”));<br>// 分隔符 === 空字符串 “”<br>// “WindRainFire”</p>
<p>console.log(a.join(“-“));<br>// 分隔符 “-“<br>// ‘Wind-Rain-Fire’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- `concat()` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)</span><br><span class="line">  concat() 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。</span><br><span class="line">  语法:</span><br><span class="line">  `var new_array = old_array.concat(value1[, value2[, ...[, valueN]]])`</span><br><span class="line">  参数：valueN</span><br><span class="line">  将数组和/或值连接成新数组。</span><br><span class="line">  返回值：新的 Array 实例。</span><br></pre></td></tr></table></figure>
<p>var arr1 = [‘a’, ‘b’, ‘c’];<br>var arr2 = [‘d’, ‘e’, ‘f’];</p>
<p>var arr3 = arr1.concat(arr2);</p>
<p>// arr3 is a new array [ “a”, “b”, “c”, “d”, “e”, “f” ]</p>
<p>// 使用 concat 来复制一个数组<br>var a = [1,2,3]<br>bar b = a.concat([])<br>a === b // false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- `map()` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map)[阮一峰](http://javascript.ruanyifeng.com/stdlib/array.html#toc14)</span><br><span class="line">  map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</span><br><span class="line">  map与forEach类似，不同的是它返回一个新数组，而forEach返回undefined。</span><br><span class="line">  语法:</span><br></pre></td></tr></table></figure>
<p>let new_array = arr.map(function callback(currentValue, index, array) { </p>
<pre><code>// Return element for new_array 
</code></pre><p>}[, thisArg])</p>
<p>// Eg<br>var numbers = [1, 2, 3];</p>
<p>numbers.map(function (n) {<br>  return n + 1;<br>});<br>// [2, 3, 4]</p>
<p>numbers<br>// [1, 2, 3]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  参数:</span><br><span class="line">  `callback`</span><br><span class="line">  生成新数组元素的函数，使用三个参数：</span><br><span class="line">  `currentValue`</span><br><span class="line">  callback 的第一个参数，数组中正在处理的当前元素。</span><br><span class="line">  `index`</span><br><span class="line">  callback 的第二个参数，数组中正在处理的当前元素的索引。</span><br><span class="line">  `array`</span><br><span class="line">  callback 的第三个参数，map 方法被调用的数组。</span><br><span class="line">  `thisArg`</span><br><span class="line">  可选的。执行 callback 函数时 使用的this 值。</span><br><span class="line">  返回值:</span><br><span class="line">  一个新数组，每个元素都是回调函数的结果。</span><br><span class="line">- `filter()` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)</span><br><span class="line">  filter() 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。 </span><br><span class="line">  语法:</span><br><span class="line">  `var new_array = arr.filter(callback[, thisArg])`</span><br><span class="line">  返回值: 一个新的通过测试的元素的集合的数组</span><br><span class="line">  ES6:</span><br><span class="line">  let [...spread]= [12, 5, 8, 130, 44];</span><br><span class="line">  等同于：let spread = 浅克隆([12, 5, 8, 130, 44])</span><br></pre></td></tr></table></figure>
<p>function isBigEnough(value) {<br>  return value &gt;= 10;<br>}</p>
<p>var filtered = [12, 5, 8, 130, 44].filter(isBigEnough);</p>
<p>// filtered is [12, 130, 44]</p>
<p>// ES6 way</p>
<p>const isBigEnough = value =&gt; value &gt;= 10; // 这里用的箭头函数</p>
<p>let […spread]= [12, 5, 8, 130, 44];</p>
<p>let filtered = spread.filter(isBigEnough);</p>
<p>// filtered is [12, 130, 44]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- `reduce()` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)</span><br><span class="line">  reduce() 方法对累加器和数组中的每个元素（从左到右）应用一个函数，将其减少为单个值。</span><br><span class="line">  语法：`arr.reduce(callback(accumulator,currentValue)[, initialValue])`</span><br><span class="line">  参数</span><br><span class="line">  `callback`</span><br><span class="line">  执行数组中每个值的函数，包含四个参数：</span><br><span class="line">    `accumulator`</span><br><span class="line">    累加器累加回调的返回值; 它是上一次调用回调时返回的累积值，或initialValue（如下所示）。</span><br><span class="line">    </span><br><span class="line">    `currentValue`</span><br><span class="line">    数组中正在处理的元素。</span><br><span class="line">    `currentIndex`</span><br><span class="line">    数组中正在处理的当前元素的索引。 如果提供了initialValue，则索引号为0，否则为索引为1。</span><br><span class="line">    `array`</span><br><span class="line">    调用reduce的数组</span><br><span class="line">  `initialValue`</span><br><span class="line">  可选,用作第一个调用callback的第一个参数的值。 如果没有提供初始值，则将使用数组中的第一个元素。在没有初始值的空数组上调用 reduce 将报错。</span><br><span class="line">  返回值: 函数累计处理的结果</span><br></pre></td></tr></table></figure>
<p>var total = [0, 1, 2, 3].reduce(function(sum, value) {<br>  return sum + value;<br>}, 0);<br>// total is 6</p>
<p>var flattened = [[0, 1], [2, 3], [4, 5]].reduce(function(a, b) {<br>  return a.concat(b);<br>}, []);<br>// flattened is [0, 1, 2, 3, 4, 5]</p>
<p>// 使用 reduce 表示 map<br>var a = [1,2,3]<br>a.map(function(value){<br>  return value * 2<br>})</p>
<p>a.reduce(function(arr, n){<br>  arr.push(n*2)<br>  return arr<br>}, [])</p>
<p>// 使用 reduce 表示 filter<br>var b = [1,2,3,4,5,6,7,8,9,10]<br>b.filter(function(value){<br>  return value % 2 === 0<br>})</p>
<p>b.reduce(function(arr, n){<br>  if(n % 2 === 0){</p>
<pre><code>arr.push(n)
</code></pre><p>  }<br>  reruen arr<br>},[])</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">- ## `Function` -[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>// 常用简写方式<br>var f = function(a,b){<br>  return a+b<br>}</p>
<p>var f = new Function(‘a’, ‘b’, ‘return a+b’) //使用 new 进行构造，<br>var f = new Function([‘a’,’b’],’return a+b’)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：`new Function ([arg1[, arg2[, ...argN]],] functionBody)`</span><br><span class="line">参数：</span><br><span class="line">`arg1, arg2, ... argN`</span><br><span class="line">被函数使用的参数的名称必须是合法命名的。参数名称是一个有效的JavaScript标识符的字符串，或者一个用逗号分隔的有效字符串的列表;例如“×”，“theValue”，或“A，B”。</span><br><span class="line">`functionBody`</span><br><span class="line">一个含有包括函数定义的JavaScript语句的字符串</span><br><span class="line"></span><br><span class="line">函数总是会返回一个值</span><br></pre></td></tr></table></figure>
<p>function fn(){<br>  console.log(‘函数’)<br>  return undefined // 如果你不写就会自动添加这样的一句<br>}<br>```</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">zerolhao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zerolhao</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
